var ObjTT={};var showLayout=false;if(glBT==undefined){var glBT={};}glBT.dispDate="";glBT.TQ=0;glBT.SL="Y";glBT.seats="";glBT.arrNoPriceVenues=["KTCT","RATC","PITG"];if(arrFBInfo==undefined){var arrFBInfo=new Array();}var arrCD=new Array();var intCDP=-1;var TT="";var SQ=0;var aAreas=new Array(),aRows=new Array(),blnSeats=true,aSS=new Array(),intSeats=0,SS="",imgSrc="http://cnt.in.bookmyshow.com/bmsin/seats/",imgSrcNew="http://cnt.in.bookmyshow.com/bmsin/SLIMG/";var isPP=(isPP==undefined)?false:true;if(isPP==true){blnSeats=true;}var intAvailSeats=0;function fnPush_to_wiz(d,b){try{if(typeof(objevent_details)=="undefined"){return true;}if(byWhat=="VN"){for(var a=0;a<aiEV.length;a++){if(aiEV[a][1]==b){objevent_details.eventcode=b;objevent_details.eventtype=aiEV[a][0];objevent_details.eventname=aiEV[a][4];objevent_details.eventlanguage=aiEV[a][2];objevent_details.eventgenre="";}}}else{if(byWhat=="ET"){for(var a=0;a<aVN.length;a++){if(aVN[a][0]==d){objevent_details.venuename=aVN[a][1];objevent_details.venuegroup=aVN[a][7];}}}}fnPushEventDataToAnalytics(["WR","KM"],"Started purchase",{ProductID:objevent_details.eventcode,"Event Type":objevent_details.eventtype,"Event Name":objevent_details.eventname,Language:objevent_details.eventlanguage,Genre:objevent_details.eventgenre,"Venue Name":objevent_details.venuename,"Venue group":objevent_details.venuegroup,"Is Logged in":objevent_details.islogedin,Page:objevent_details.page});}catch(c){fnErr({fnName:"",err:c});}}function fnPopupSelSh(i,d,g,b,h){try{blnfuncin=false;fnPush_to_wiz(d,b);var f={msgText:"",msgType:"",msgTitle:""};if(fnGQS("cid","")!=""){f={msgText:aVN[0][12].replace(/\r\n/gi,"<br/>"),msgType:aVN[0][13],msgTitle:aVN[0][14]};}else{for(var c=0;c<aVN.length;c++){if(aVN[c][0]==d){f={msgText:aVN[c][16].replace(/\r\n/gi,"<br/>"),msgType:aVN[c][17],msgTitle:aVN[c][18]};break;}}}if(jq.inArray(d,["FNAS","FNAN","FNCH","FNCM","FNCO","FNSD","FNBG","FNBP","FNAM","FNGW","FNJJ","FNCK","FNKT","FNRC","FNLK","FNBH","FNMT","FNPN","FNPP","FNDB","FNLN","FNHY"])!=-1){f={msgText:"Please read this important Terms and Conditions for the Internet Booking<br> INR 30 will be charged per ticket for 3D glasses. Kindly return the 3D glasses once the movie gets over. This amount is non-refundable.",msgType:"I",msgTitle:"Terms &amp; Conditions"};blnfuncin=true;}jq("#dPopupMsgTitle, #dPopupMsgText, #dPopupButtonGroup").hide();jq("#btnPopupOK, #btnPopupAccept, #btnPopupCancel").hide();if(f.msgTitle!=""){jq("#dPopupMsgTitle").html(f.msgTitle).show();}if(f.msgText!=""){jq("#dPopupMsgText").css({textAlign:"left"});if(f.msgText.indexOf("<br/>")==-1&&!blnfuncin){jq("#dPopupMsgText").css({textAlign:"center"});}jq("#dPopupMsgText").html(f.msgText).show();}jq("#dPopupButtonGroup").show();if(f.msgType=="AC"){jq("#btnPopupAccept, #btnPopupCancel").show();}else{if(f.msgType=="I"){jq("#btnPopupOK").show();}else{jq("#btnPopupOK, #btnPopupCancel").show();}}jq("#btnPopupOK, #btnPopupAccept").unbind("click");jq("#btnPopupCrossCancel, #btnPopupCancel").unbind("click");jq("#btnPopupOK, #btnPopupAccept").bind("click",function(){jq("#dPopupMsgCallout").fadeOut();fnSelSh(i,d,g,b,h);});jq("#btnPopupCrossCancel, #btnPopupCancel").bind("click",function(){fnGATracker({location:"Cl1catqty",action:"Close"});fnCover(false);jq("#dPopupMsgCallout").fadeOut();});fnCover(true);fnDoFloat("#dPopupMsgCallout").fadeIn();}catch(i){fnErr({fnName:"fnPopupSelSh",fnParams:i+", "+d+", "+g+", "+b+", "+h,err:i});}}function fnSelSh(g,k,j,p,m){try{fnPush_to_wiz(k,p);if(typeof(ga)!=="undefined"){ga("set",1,"Cinema-ID",k,2);}jq("#FLDonation").attr("checked",false);isDonation=false;jq("#rEticketHO").attr("checked",false);jq("#rEticketBO").attr("checked",false);var o=new clsCookie();if((o.get({name:"lngTransId",defVal:""})!=""&&o.get({name:"lngTransId",defVal:""})!="0")||(o.get({name:"BOOKINGID",defVal:""})!="")){fnGlobalErr({eCode:"unFinTrans"});return;}for(var f=0;f<aVN.length;f++){if(aVN[f][0]==k){if(aVN[f][11]==undefined){glBT.VenAppType=aVN[f][6];}else{glBT.VenAppType=aVN[f][11];}}}fnBusy(true);glBT.SVC=k;glBT.SSID=j;glBT.SEC=p;glBT.SST=m;var a="";var c=0;var d=o.get({name:"userCine",key:"mrs",defVal:""}).split(";");if(jq.inArray(glBT.SVC,d)==-1){var b=(d.length>3)?1:0;for(var f=b;f<d.length;f++){if(d[f]!=""){a+=d[f]+";";}}a+=glBT.SVC+";";o.set({name:"userCine",key:"mrs",value:a,sess:false});}var n="";var h="";glBT.dispDate=(cmbMovieDate.getCurrent().name!="")?cmbMovieDate.getCurrent().name:glBT.dispDate;var l=glBT.dispDate;if(typeof(aiEV)!=="undefined"){for(var f=0;f<aiEV.length;f++){if(aiEV[f][1]==p){n=aiEV[f][4];break;}}}for(var f=0;f<aVN.length;f++){if(aVN[f][0]==k){h=aVN[f][1];break;}}jq("#SLEName_New").html(n);jq("#ShowTym_New").html(l+", "+m);jq("#VenAdd_New").html(h);jq("#EName, #EName_MC").html(n);jq("#EDtl").children().eq(0).html(l+", "+m);jq("#EDtl_MC").children().eq(0).html(l+", "+m);jq("#EDtl").children().eq(1).html(h);jq("#EDtl_MC").children().eq(1).html(h);jq("#SLEName").html(n);jq("#SLEDtl").children().eq(0).html(l+", "+m);jq("#SLEDtl").children().eq(1).html(h);fnAjax({dataType:"script",success:function(e){fnCallout(e);},type:"GET",url:"/getJSData/?file="+global.dumpPath+"GetShowInfo_"+glBT.SVC+"_"+glBT.SSID+".js&cmd=GETSHOWINFOWEB&vc="+glBT.SVC+"&sc="+glBT.SSID+"&_="+fnTS()});}catch(g){fnErr({fnName:"fnSelSh",fnParams:g+", "+k+", "+j+", "+p+", "+m,err:g});}}function fnSelShMultiCat(h,l,k,q,n,d){try{jq("#FLDonation").attr("checked",false);isDonation=false;jq("#rEticketHO").attr("checked",false);jq("#rEticketBO").attr("checked",false);var p=new clsCookie();if((p.get({name:"lngTransId",defVal:""})!=""&&p.get({name:"lngTransId",defVal:""})!="0")||(p.get({name:"BOOKINGID",defVal:""})!="")){fnGlobalErr({eCode:"unFinTrans"});return;}else{p.del({name:"lngTransId"});p.del({name:"BOOKINGID"});p.del({name:"merc"});}fnBusy(true);glBT.SVC=l;glBT.SSID=k;glBT.SEC=q;glBT.SST=n;var a="";var c=0;var f=p.get({name:"userCine",key:"mrs",defVal:""}).split(";");if(jq.inArray(glBT.SVC,f)==-1){var b=(f.length>3)?1:0;for(var g=b;g<f.length;g++){if(f[g]!=""){a+=f[g]+";";}}a+=glBT.SVC+";";p.set({name:"userCine",key:"mrs",value:a,sess:false});}var o="";var j="";glBT.dispDate=(cmbMovieDate.getCurrent().name!="")?cmbMovieDate.getCurrent().name:glBT.dispDate;var m=glBT.dispDate;if(typeof(aiEV)!=="undefined"){for(var g=0;g<aiEV.length;g++){if(aiEV[g][1]==q){o=aiEV[g][4];break;}}}for(var g=0;g<aVN.length;g++){if(aVN[g][0]==l){j=aVN[g][1];break;}}jq("#EName, #EName_MC").html(o);jq("#EDtl").children().eq(0).html(m+", "+n);jq("#EDtl_MC").children().eq(0).html(m+", "+n);jq("#EDtl").children().eq(1).html(j);jq("#EDtl_MC").children().eq(1).html(j);jq("#SLEName").html(o);jq("#SLEDtl").children().eq(0).html(m+", "+n);jq("#SLEDtl").children().eq(1).html(j);fnAjax({dataType:"script",success:function(e){fnCalloutMultiCat(e,d);},type:"GET",url:"/getJSData/?file="+global.dumpPath+"GetShowInfo_"+glBT.SVC+"_"+glBT.SSID+".js&cmd=GETSHOWINFOWEB&vc="+glBT.SVC+"&sc="+glBT.SSID+"&_="+fnTS()});}catch(h){fnErr({fnName:"fnSelShMultiCat",fnParams:h+", "+l+", "+k+", "+q+", "+n,err:h});}}function fnCalloutMultiCat(g,c){try{var f=false;var h="";if(arrShowInfo[0].length>11){if(arrShowInfo[0][12]!=0&&arrShowInfo[0][12].length!=0){if(arrShowInfo[0][12]==3){f=true;h+="Adult ";var l=(fnGQS("ety","")!="")?fnGQS("ety",""):(Etype!=undefined&&Etype!="")?Etype:"MT";switch(l.toUpperCase()){case"MT":h+="Movie";break;case"PL":h+="Play";break;case"CT":case"EV":case"SS":h+="Event";break;default:h+="Event";}h+=" - Children below 18 years not allowed.";}}}if(f==true){jq("#CenMsg, #CenMsg_MC").html(h).show();}else{jq("#CenMsg, #CenMsg_MC").hide();}var b="";for(var k=0;k<arrShowInfo.length;k++){if(arrShowInfo[k][9]=="N"){showLayout=false;}else{showLayout=true;}b+='<div class="fl_100 buyselbox" data-price-code="'+arrShowInfo[k][2]+'">';b+='<input type="text" class="dc" readonly="readonly" value="'+arrShowInfo[k][3]+'"/>';if(arrShowInfo[k][5]=="Y"){var a='<option value="0">Qty</option>';for(var d=1;d<=arrShowInfo[k][6];d++){a+='<option value="'+d+'">'+d+"</option>";}b+='<div class="dq"><select id="cmbQty'+(k+1)+'" onchange="fnDispTotal();">'+a+"</select></div>";b+='<div class="dt" id="subtot_'+arrShowInfo[k][2]+'">Rs. 0.00</div>';}else{b+='<div class="dq"><select id="cmbQty'+(k+1)+'" disabled="disabled" onchange="fnDispTotal();"><option value="0">SOLD OUT</option></select></div>';}b+="</div>";}jq("#category_MC").html(b);if(c!=undefined){jq(".buyselbox").not("[data-price-code='"+c+"']").hide();}jq("#divTotal_MC").html("Rs. 0.00");jq("#btnProceed_MC").html(showLayout==true?"Proceed to Seat Selection":"Proceed to Order Summary");fnBusy(false);fnCover(true);fnDoFloat("#tblClassMultiCat");jq("#tblClassMultiCat").show();}catch(m){fnErr({fnName:"fnCalloutMultiCat",fnParams:g,err:m});}}function fnDispTotal(){var c,g,h,k,b=jq("#category_MC").find("select"),s=jq("#divTotal_MC");var r=0;var n=arrShowInfo.length;try{var q=new Array();var u=0;s.html("Rs. 0.00");for(var f=0;f<arrShowInfo.length;f++){u+=parseInt(b.eq(f).val());q[f]=parseFloat(arrShowInfo[f][4])*b.eq(f).val();jq("#subtot_"+arrShowInfo[f][2]).html("Rs. "+(parseFloat(arrShowInfo[f][4])*b.eq(f).val()).toFixed(2));}for(var f=1;f<=n;f++){if(jq("#cmbQty"+f).val()!=""){r+=parseInt(jq("#cmbQty"+f).val());}}var m=10-r;var o=new Array();for(var f=1;f<=n;f++){o.push(jq("#cmbQty"+f).val());}for(var f=1;f<=n;f++){if(jq("#cmbQty"+f).val()==""||jq("#cmbQty"+f).val()=="0"){var p=m;if(arrShowInfo[f-1][5]=="Y"){jq("#cmbQty"+f+" > option").remove();jq("#cmbQty"+f).append('<option value="0">Qty</option>');p=(p>parseInt(arrShowInfo[f-1][6]))?parseInt(arrShowInfo[f-1][6]):p;for(var d=1;d<=p;d++){jq("#cmbQty"+f).append(jq("<option></option>").attr("value",d).text(d));}}else{if(arrShowInfo[f-1][5]=="C"){jq("#cmbQty"+f).append(jq("<option></option>").attr("value",0).text("CLOSED"));}else{jq("#cmbQty"+f).append(jq("<option></option>").attr("value",0).text("SOLD OUT"));}}}}for(var f=1;f<=n;f++){if(jq("#cmbQty"+f).val()!=""&&jq("#cmbQty"+f).val()!="0"){jq("#cmbQty"+f+" > option").remove();jq("#cmbQty"+f).append('<option value="0">Qty</option>');var p=parseInt(o[f-1])+m;p=(p>parseInt(arrShowInfo[f-1][6]))?parseInt(arrShowInfo[f-1][6]):p;for(var d=1;d<=p;d++){jq("#cmbQty"+f).append(jq("<option></option>").attr("value",d).text(d));}jq("#cmbQty"+f).val(o[f-1]);}}for(var f=0,k=0;f<q.length;k+=parseFloat(q[f++])){}if(k!=0){c=k-Math.ceil((k*10)/100);fnUpdtTotal(c,k);}else{s.html("Rs. 0.00");}}catch(l){fnErr({fnName:"fnDispTotal",err:l});}}function fnUpdtTotal(a,c){var b=jq("#divTotal_MC");try{if(a<=c){b.html("Rs. "+a.toFixed(2));a+=5;}else{b.html("Rs. "+c.toFixed(2));return;}fnUpdtTotal(a,c);}catch(d){fnErr({fnName:"fnUpdtTotal",err:d});}}function fnInitMultiCatBook(){try{var g=0,h="",a="",c=jq("#category_MC").find("select");arrCD=new Array();for(var b=0;b<arrShowInfo.length;b++){if(c.eq(b).val()!="0"){if(a!=""){h+="|";a+="|";}a+=arrShowInfo[b][8]+"-"+c.eq(b).val();arrCD.push(new Array(arrShowInfo[b][2],c.eq(b).val()));g+=parseInt(c.eq(b).val());}}if(g<=0){fnCMsgDis("errMC","Please select the Class/Quantity of tickets","e");}var d=new clsCookie();if(g>0){fnCnCl();fnBusy(true);OD="";if(d.get({name:"oc"})!=""){OD="|OFFERCODE="+d.get({name:"oc"});}glBT.seats=a;glBT.TQ=g;fnInitTrans(glBT.SVC,glBT.SSID,h,OD,showLayout);}}catch(f){fnErr({fnName:"fnInitMultiCatBook",err:f});}}function fnCallout(f){try{if(arrShowInfo.length==0){fnBusy(false);fnCover(true);jq("body").append('<div id="Data_not_found_error" style="display:none1;" class="mainr callor"><div class="mainr callwhite"><div style="padding:10px;"><div style="font-size:14px; font-weight:bold;"><p>Booking has been temporarily suspended. Kindly come back later.</p></div><div style="margin-top:5px;"><a href="javascript:;" style="float:right; margin-bottom:10px;" class="button yellow" onclick="fnBusy(false); jq(\'#Data_not_found_error\').hide();">OK</a></div></div></div></div>');fnDoFloat("#Data_not_found_error");jq("#Data_not_found_error").show();return;}if(blnVistaCine){if(arrShowInfo[0][12]==3){jq("#SLNew_CenMsg").html("Adult Movie - Children below 18 years not allowed.");jq("#SLNew_CenMsg").show();}else{jq("#SLNew_CenMsg").hide();}}ObjTT={};for(var h=0;h<arrShowInfo.length;h++){ObjTT[arrShowInfo[h][8]]={};ObjTT[arrShowInfo[h][8]]["TT"]=arrShowInfo[h][2];ObjTT[arrShowInfo[h][8]]["CatagoryName"]=arrShowInfo[h][3];ObjTT[arrShowInfo[h][8]]["Price"]=parseFloat(arrShowInfo[h][4],10);ObjTT[arrShowInfo[h][8]]["Rules"]=(arrShowInfo[h][11]==undefined)?"0":arrShowInfo[h][11];}var d=false;var g="";if(arrShowInfo[0].length>11){if(arrShowInfo[0][12]!=0&&arrShowInfo[0][12].length!=0){if(arrShowInfo[0][12]==3){d=true;g+="Adult ";var k=(fnGQS("ety","")!="")?fnGQS("ety",""):(Etype!=undefined&&Etype!="")?Etype:"MT";switch(k.toUpperCase()){case"MT":g+="Movie";break;case"PL":g+="Play";break;case"CT":case"EV":case"SS":g+="Event";break;default:g+="Event";}g+=" - Children below 18 years not allowed.";}}}if(d==true){jq("#CenMsg, #CenMsg_MC").html(g).show();}else{jq("#CenMsg, #CenMsg_MC").hide();}var m=new Array();if(!(typeof(aVN)=="undefined")){m.CMAX=false;m.PRSD=false;m.INZS=false;m.KTVM=false;m.GOPA=false;m["3D"]=false;m.DONE=false;m.PACK=false;m.ROTK=false;m.JYKL=false;m.NACK=false;m.TVTB=false;m.MUTB=false;m.HDIL=false;m.PrintComp=false;for(var h=0;h<aVN.length;h++){if(glBT.SVC==aVN[h][0]&&aVN[h][7]=="PRSD"){m.PRSD=true;break;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC==aVN[h][0]&&aVN[h][7]=="CMAX"){m.CMAX=true;break;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC=="INZS"){m.INZS=true;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC=="KTVM"){m.KTVM=true;}}for(var h=0;h<aVN.length;h++){if(jq.inArray(glBT.SVC,["KBBH","KBBV","KBBE","KBIN","KBKK","KBVS"])!=-1){m.HDIL=true;}}for(var h=0;h<aVN.length;h++){if(jq.inArray(glBT.SVC,["GLRY","SUHC","ACWL","DEWA","SRVV","SVMV","MTBB","AMRT","SLTR"])!=-1){m.PrintComp=true;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC==aVN[h][0]&&aVN[h][7]=="GOPA"){m.GOPA=true;break;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC=="ROTK"){m.ROTK=true;break;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC=="JYKL"){m.JYKL=true;break;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC=="NACK"){m.NACK=true;break;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC=="TVTB"){m.TVTB=true;break;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC=="MUTB"){m.MUTB=true;break;}}for(var h=0;h<aVN.length;h++){if(glBT.SVC=="PACK"){m.PACK=true;break;}}if(fnGQS("cid","")!=""){for(var h=0;h<aEV.length;h++){if(aEV[h][0]==glBT.SEC&&aEV[h][1].indexOf("3D")>1){m["3D"]=true;break;}}}else{for(var h=0;h<aEV.length;h++){if(aEV[h][0]==glBT.SEC&&aEV[h][3].indexOf("3D")>1){m["3D"]=true;break;}}}if(m.INZS){jq("#dChildNote").hide();jq("#dINZSNote").show();}else{jq("#dChildNote").show();jq("#dINZSNote").hide();}if(m.KTVM||m.HDIL){jq("#dChildNote").hide();jq("#dChildNote2Yrs").show();}else{if(!m.INZS){jq("#dChildNote").show();}jq("#dChildNote2Yrs").hide();}jq("#dGopalanChildNode").hide();if(m.GOPA){jq("#dGopalanChildNode").show();}jq("#dPrintOutComp").hide();if(m.PACK||m.ROTK||m.NACK||m.TVTB||m.MUTB||m.JYKL||m.PrintComp){jq("#dPrintOutComp").show();}jq("#d3DNote").hide();jq("#d3DNoteOS").hide();if(m.PRSD&&m["3D"]){jq("#dPrsdNote").show();m.DONE=true;}else{jq("#dPrsdNote").hide();}if(!m.DONE){if(m["3D"]){jq("#d3DNote").show();jq("#d3DNoteOS").show();}else{jq("#d3DNote").hide();jq("#d3DNoteOS").hide();}}jq("#dPrintSMSCompulsoryNote").hide();if(glBT.SVC&&(jq.inArray(glBT.SVC,["SUHC","GLRY","ATBL","ANBL","ATSP","BTBL","CTCP","ESBS","EVTH","KARD","GPTB","GPTH","GTYT","KATH","KCBL","LKTH","MNBL","MANO","NARN","NRBL","PTBK","STSN","SKBG","SRRT","SSTB","SVYK","SVTH","TRTH","VBWT","VRBL","VRMR","SVTB","VTBY","VTGB","RKTS","SKVN","STVN","WOTM","PATD","PTDB","SYTG","SMTG","DEWA","SABB"])>-1)){jq("#dPrintSMSCompulsoryNote").show();}jq("#spAjantaTheaterNotes").hide();if(glBT.SVC&&glBT.SVC=="ATTR"){jq("#spAjantaTheaterNotes").show();}jq("#dPrasadsLargeNotImax").hide();if(glBT.SVC&&glBT.SVC=="PRHY"){jq("#dPrasadsLargeNotImax").show();}}jq("#tikCat").html('<option id="disTT" value="">Ticket Type</option>');jq("#cmbQty").html('<option value="0">Qty</option>');jq("#dRearCircleNotes").hide();for(var h=0;h<arrShowInfo.length;h++){glBT.SLF=arrShowInfo[h][9];if(arrShowInfo[h][9]=="N"){showLayout=false;}else{showLayout=true;}if(arrShowInfo[h][5]=="Y"){jq("#tikCat").append('<option value="'+arrShowInfo[h][2]+'">'+arrShowInfo[h][3]+"</option>");}else{jq("#tikCat").append("<option disabled='disabled' value=\""+arrShowInfo[h][2]+'">'+arrShowInfo[h][3]+" - Sold Out</option>");}}if(blnVistaCine){jq("#SLcmbQty").html("").append('<option value="">Qty</option>');if(arrShowInfo[0][19]!=""){var a=arrShowInfo[0][19].split("|");for(var h=0;h<a.length;h++){jq("#SLcmbQty").append("<option value="+a[h]+">"+a[h]+"</option>");}}else{var b=0;for(var h=0;h<arrShowInfo.length;h++){if(arrShowInfo[h][6]>b){b=parseInt(arrShowInfo[h][6],10);}}for(var c=1;c<=b;c++){jq("#SLcmbQty").append("<option value="+c+">"+c+"</option>");}}}if(blnVistaCine&&showLayout){fnGetSL();}else{fnBusy(false);fnCover(true);fnDoFloat("#tblClass");jq("#tblClass").show();}}catch(l){fnErr({fnName:"fnCallout",fnParams:f,err:l});}}function fnGetSL(){try{fnDoTrans({AppC:glBT.AppCode,venCode:glBT.SVC,transId:"0",cmd:"GETSEATLAYOUT",p1:glBT.SSID,p2:"WEB",fnCC:fnMakeObj,fnEC:fnErr});}catch(a){alert(a);}}function fnSetQtyCmb(){try{var f=jq("#tikCat");var a=jq("#tikCat option:selected").html();jq("#dRearCircleNotes").hide();jq("#dRearCircleNotes #printComp").hide();if((jq.inArray(glBT.SVC,["TGSR","TGSV"])!=-1&&a.toUpperCase().indexOf("REAR")==0)||(f.val()!=""&&jq.inArray(glBT.SVC,["SCKO","ATTR","SSVL","TGSN"])!=-1)){jq("#dRearCircleNotes").show();if(glBT.SVC=="ATTR"){jq("#dRearCircleNotes #printComp").show();}else{jq("#dRearCircleNotes #printComp").hide();}}jq("#dVarshaFamilyNotes").hide();if(jq.inArray(glBT.SVC,["VRSA"])!=-1&&f.val()=="0001"){jq("#dVarshaFamilyNotes").show();}jq("#cmbQty").html('<option value="0">Qty</option>');if(arrShowInfo[0][19]!=""){var d=arrShowInfo[0][19].split("|");for(var c=0;c<d.length;c++){jq("#cmbQty").append("<option value="+d[c]+">"+d[c]+"</option>");}}else{for(var c=0;c<arrShowInfo.length;c++){if(f.val()==arrShowInfo[c][2]){if(arrShowInfo[c][5]=="Y"){for(var b=1;b<=parseInt(arrShowInfo[c][6]);b++){jq("#cmbQty").append('<option value="'+b+'">'+b+"</option>");}}else{jq("#cmbQty").append('<option value="0">Sold Out</option>');}}}}}catch(g){fnErr({fnName:"fnSetQtyCmb",err:g});}}function fnPreInitBook(){try{if(jq("#cmbQty").val()==0){return;}else{fnGATracker({location:"Cl1catqty",action:"SelQty"});fnInitBook();if(typeof(fnPush_to_Kis_Wiz)!=="undefined"){fnPush_to_Kis_Wiz("Selected quantity","Category + Quantity from Buytickets");}}}catch(a){fnErr({fnName:"fnPreInitBook",err:a});}}function fnInitBook(){try{var a=jq("#tikCat");var f=jq("#cmbQty");var b=0;var h="";var k="";var j=new clsCookie();arrCD=new Array();for(var c=0;c<arrShowInfo.length;c++){if(a.val()==arrShowInfo[c][2]){if(k!=""){h+="|";k+="|";}k+=arrShowInfo[c][8]+"-"+f.val();arrCD.push(new Array(arrShowInfo[c][2],f.val()));b+=parseInt(f.val());break;}}if(b>0){OD="";var g=j.get({name:"oc",value:""});if(g!=""){OD="|OFFERCODE="+g+"|";}glBT.seats=k;glBT.TQ=b;fnInitTrans(glBT.SVC,glBT.SSID,h,OD,showLayout);}}catch(d){fnErr({fnName:"fnInitBook",err:d});}}function fnPkgCl(){try{var g=ObjCheckList.strSSeats.split("|")[2];var b=[];if(blnVistaCine){for(var c=0;c<arrShowInfo.length;c++){if(g===arrShowInfo[c][8]&&arrShowInfo[c][21]==="Y"){b.push(arrShowInfo[c]);}}if(b.length<=1){fnPreInit();}else{if(ObjCheckList.SelectedSeats.length!=0){if(ObjCheckList.TotalSeats!=0){fnSLErrors("SLError","Please select exactly "+jq("#SLcmbQty").val()+" seats.","e");}else{jq("#pkgseat div.hdname").html(jq("div.hdname").html());jq("#tblClassNew").hide();var d="";for(var a=0;a<b.length;a++){d+="<div onclick=\"fnSetTT('"+b[a][2].toString()+'\');" class="pkg"><img style="padding: 10%;" src="//cnt.in.bookmyshow.com/bmsin/callouts/foodc.jpg" onerror="this.src=\'//cnt.in.bookmyshow.com/bmsin/callouts/foodc.jpg\'"><div style="background: none repeat scroll 0% 0% transparent; display: block; padding: 5%;"><b>'+b[a][3]+'</b><br></div><div><span style="width: 91%;" class="button yellow">Select</span></div></div>';}jq("#pkgContainer").html(d);jq("#pkgseat").show();fnDoFloat("#pkgseat");}}else{if(jq("#SLcmbQty").val()==""){fnSLErrors("SLError","Please select quantity","e");}}}}else{fnPreInit();}}catch(f){fnErr({fnName:"fnPkgCl",err:f});}}function fnSetTT(c){try{ObjTT[ObjCatagories[ObjCheckList.CatagoryToSelect]["AreaCode"]]["TT"]=c;jq("#pkgseat").hide();fnPreInit();}catch(b){fnErr({fnName:"fnSetTT",err:b});}}var blnException=true;function fnInitTrans(d,h,j,c,a){try{blnException=true;showLayout=false;var f=new clsCookie();jq("#tblClass, #tblClassMultiCat").hide();fnBusy(true);intCDP=-1;OD=c;glBT.SL="N";for(var b=0;b<arrShowInfo.length;b++){if((jq("#tikCat").val()==arrShowInfo[b][2])&&arrShowInfo[b][9]=="Y"){glBT.SL="Y";showLayout=true;}}fnDoTrans({AppC:global.AppC,venCode:d,transId:0,cmd:"INITTRANS",p1:"",p2:"",p3:"",p4:"",p5:"",p6:"",p7:"",p8:"",p9:"",p10:"",fnCC:fnAddSeats,ccObj:true,fnEC:fneSc});}catch(g){fnErr({fnName:"fnInitTrans",fnParams:d+" "+h+" "+j+" "+c+" "+a,err:g});}}function fnAddSeats(g){try{var f=g.strData;var a=g.intExceptionEx;var d="";intCDP++;var b=new clsCookie();TT=arrCD[intCDP][0];SQ=arrCD[intCDP][1];if(intCDP==0){lngTransId=fnGVal({key:"TRANSACTIONID",data:f});b.set({name:"lngTransId",value:lngTransId});}else{if(a!="3"){blnException=false;}}d=(intCDP<arrCD.length-1)?fnAddSeats:fnGSL;fnDoTrans({AppC:global.AppC,venCode:glBT.SVC,transId:lngTransId,cmd:"ADDSEATS",p1:glBT.SSID,p2:TT,p3:SQ,p4:b.get({name:"strRef",defVal:""}),p5:OD,p6:"",p7:"",p8:"",p9:"",p10:"",fnCC:d,ccObj:true,fnEC:fneSc});}catch(c){fnErr({fnName:"fnAddSeats",fnParams:f,err:c,supp:false});}}function fnGSL(d){try{var c=d.strData;if(d.intExceptionEx!="3"){blnException=false;}var a=new clsCookie();if(jq("#oddsm")!=undefined){jq("#oddsm").hide();}if(c!=""){strBookingId=fnGVal({key:"BOOKINGID",data:c});strSeatInfo=fnGVal({key:"SEATINFO",data:c});curTicketsAmt=fnGVal({key:"TICKETSAMT",data:c});curFoodAmt=fnGVal({key:"FOODAMT",data:c});curBookingFee=fnGVal({key:"BOOKINGFEE",data:c});curDiscountAmt=fnGVal({key:"DISCOUNTAMT",data:c});curTotalAmt=fnGVal({key:"TOTALAMT",data:c});a.set({name:"BOOKINGID",value:strBookingId});}else{lngTransId=a.get({name:"lngTransId",value:""});}if(glBT.SLF=="A"&&blnException){showLayout=true;}else{if(glBT.SLF=="A"&&!blnException){showLayout=false;}}if(showLayout==false){window.scrollTo(0,0);(pet!="CT")?fnuSI():fnGotoPay();}else{fnDoTrans({AppC:global.AppC,venCode:glBT.SVC,transId:lngTransId,cmd:"GETSEATLAYOUT",p1:glBT.SSID,p2:"WEB",p3:"",p4:"",p5:"",p6:"",p7:"",p8:"",p9:"",p10:"",fnCC:cSL,fnEC:fnCanTr});}}catch(b){fnErr({fnName:"fnGSL",fnParams:c,err:b});}}function cSL(l){try{intAvailSeats=0;var g=new clsCookie();aSS=new Array();aAreas=new Array();aRows=new Array();if(l!=""){fSL(l);}var v,r,h,q,E,s,D,C,d="",G="",b="",x=0;var p=jq("#tblSeatLayout");var f=jq("#tblSeatInfo");if(f.innerHTML!=""){f.innerHTML="";}TQ=glBT.TQ;SS="";r=jq("<tbody></tbody>");v=jq("<table></table>");v.attr("align","center");var y="";for(var B=0;B<aAreas.length;B++){y+="|"+aAreas[B][1]+"-"+aAreas[B][5];}y+="|";y=y.substring(0,y.length);glBT.seats=y;for(var k=0;k<aRows.length;k++){if(d!=aRows[k][2].substring(0,1)){h=jq("<tr></tr>");q=jq("<td></td>");q.attr("colSpan",100);d=aRows[k][2].substring(0,1);var u=jq("#rowNDSC");u.html("");for(var w=0;w<aAreas.length;w++){if(!isPP){u.show();for(var B=0;B<arrShowInfo.length;B++){if(aAreas[w][1]==arrShowInfo[B][8]&&arrShowInfo[B][10]=="P"){u.html('<img src="http://cnt.in.bookmyshow.com/img/preview/'+glBT.SVC+"_"+glBT.SSID+'.jpg" alt="" />');u.show();break;}}}if(aAreas[w][0]==d){x=parseInt(aAreas[w][5]);q.html(aAreas[w][3]);b=aAreas[w][1];G=aAreas[w][2];}}if(glBT.SVC!="KODG"){q.addClass("cssRow");h.append(q);r.append(h);}}h=jq("<tr></tr>");q=jq("<td></td>");if(aRows[k][1].length>1){q.css("fontSize","5pt");}q.html(aRows[k][1]);q.addClass("cssDot");q.css({width:"17px"});q.css({height:"17px"});h.append(q);for(var z=2;z<aRows[k].length;z++){q=jq("<td></td>");q.css({padding:"2px 2px 2px 2px"});q.css({width:"17px"});q.css({height:"17px"});D=jq("<img>");switch(aRows[k][z].substring(1,2)){case"0":q.css({background:"#FFFFFF"});q.html("&nbsp;&nbsp;&nbsp;&nbsp;");break;case"1":D.attr("src",""+imgSrcNew+"1_1.png?v1");intAvailSeats++;if(glBT.SVC=="KODG"){var m=gAC(aRows[k][z].substring(0,1))+"_"+G+"_"+aRows[k][0]+"_"+(aRows[k][z].substring(2));q.attr("id",m);}else{var m=b+"_"+G+"_"+aRows[k][0]+"_"+(aRows[k][z].substring(2));q.attr("id",m);}q.mouseover(function(){cursor(this,"hand");});q.click(function(){selectSeats(this);});q.append(D);break;case"2":D.attr("src",""+imgSrcNew+"1_2.png?v1");q.attr("name","Red_"+b+"_"+G+"_"+aRows[k][0]+"_"+(aRows[k][z].substring(2)));q.append(D);break;case"3":D.attr("src",""+imgSrcNew+"1_2.png?v1");q.append(D);break;case"4":D.attr("src",""+imgSrcNew+"1_4.png?v1");var m=b+"_"+G+"_"+aRows[k][0]+"_"+(aRows[k][z].substring(2));q.attr("id",m);SS+=q.attr("id")+"|";q.mouseover(function(){cursor(this,"hand");});q.click(function(){selectSeats(this);});q.append(D);aSS.push(q.attr("id"));break;}h.append(q);}r.append(h);v.append(r);}h=jq("<tr></tr>");q=jq("<td></td>");q.attr("colSpan",999);h.append(q);r.append(h);v.append(r);f.html("");f.append(v);jq("#fbPicsHead").hide();jq("#fbPics").hide();jq("#fbPics").html("");var a="";var A=1;var c=2;for(var t=0;t<arrFBInfo.length;t++){if(glBT.SVC==arrFBInfo[t][1]&&glBT.SSID==arrFBInfo[t][2]){A++;if(A%c==0){if(A/c==1){a+='<div id="dSlFr'+(A/c)+'" style="float: left;">';}else{a+='<div id="dSlFr'+(A/c)+'" style="float: left; display: none;">';}}if(arrFBInfo[t][3]==1){a+='<img src="https://graph.facebook.com/'+arrFBInfo[t][0]+'/picture" width="50" height="50" onmouseover="fnShFBSeats(\''+arrFBInfo[t][6]+"');\" onmouseout=\"fnClFBSeats('"+arrFBInfo[t][6]+"');\" alt='"+arrFBInfo[t][5]+" booked "+arrFBInfo[t][3]+" ticket' title='"+arrFBInfo[t][5]+" booked "+arrFBInfo[t][3]+" ticket'>";}else{a+='<img src="https://graph.facebook.com/'+arrFBInfo[t][0]+'/picture" width="50" height="50" onmouseover="fnShFBSeats(\''+arrFBInfo[t][6]+"');\" onmouseout=\"fnClFBSeats('"+arrFBInfo[t][6]+"');\" alt='"+arrFBInfo[t][5]+" booked "+arrFBInfo[t][3]+" tickets' title='"+arrFBInfo[t][5]+" booked "+arrFBInfo[t][3]+" tickets'>";}if(A%c==(c-1)){a+="</div>";}}}if(A%c!=(c-1)){a+="</div>";}var n="";if(a!=""){n+="<span>Know where your friends are seated</span>";n+='<div class="fbfriends">';if(A>5){n+='<a class="back fbbackmar"></a>';n+=a;n+='<a class="forward	 fbformar"></a>';}else{n+=a;}n+="</div>";jq("#fbPicsHead").show();jq("#fbPics").html(n);jq("#fbPics").show();}if(pet=="MT"){jq("#scrImg").attr("src",""+imgSrc+"p3_r1_c1.jpg");}else{jq("#scrImg").attr("src",""+imgSrc+"stg_p3_r1_c1.jpg");}fnBusy(false);fnCover(true);if(intAvailSeats==0){if(jq("#NoSeats").length===0){alert("No Seats available for booking.");fnCanTr();}else{fnDoFloat("#NoSeats");jq("#NoSeats").show();}}else{fnDoFloat("#tblSeatLayout");jq("#tblSeatLayout").show();}}catch(F){fnErr({fnName:arguments.callee.name,fnParams:arguments,err:F,supp:false});}}function cursor(a,c){try{if(c.toLowerCase()=="hand"){a.style.cursor="pointer";}}catch(b){fnErr({fnName:"cursor",fnParams:a+","+c,err:b});}}function clsSel(d){try{var a;var g=new Array();for(var b=0;b<aSS.length;b++){a=document.getElementById(aSS[b]);if(a.id.search(d)>=0){a.firstChild.src=imgSrcNew+"1_1.png?v1";SS=SS.replace(aSS[b]+"|","");intSeats++;}}for(var b=0;b<aSS.length;b++){a=document.getElementById(aSS[b]);if(a.id.search(d)>=0){g.push(b);}}for(var b=g.length-1;b>=0;b--){aSS.splice(g[b],1);}}catch(f){var c=new clsCookie();fnErr({fnName:"clsSel",fnParams:d,err:f});}}function selectSeats(n){var m=false;var r=n.id.split("_");var b=gAS(r[0]);intSeats=b;if(b==0){clsSel(r[0]);b=gAS(r[0]);intSeats=b;}var c=0;for(var h=0;h<n.parentNode.childNodes.length;h++){if(n.parentNode.childNodes[h].id==n.id){c=h-1;break;}}var q=n.parentNode.childNodes;var p=new Array(false,false,false,false,false);var f=0;for(var h=0;h<arrShowInfo.length;h++){if(TT==arrShowInfo[h][2]){f=(arrShowInfo[h][11]===undefined)?"0":arrShowInfo[h][11];}}var o=new Array();for(var h=p.length;h>=0;h--){var g=Math.pow(2,h);var d=f/g;if(d>=1&&d<2){p[h]=true;f-=g;}}if(p[0]){if(c>=2&&q[c].childNodes.length&&q[c-1].childNodes.length&&q[c].childNodes[0].src.match(/1_1/gi)&&q[c-1].childNodes[0].src.match(/1_2/gi)){fnCMsgDis("seatErr","You cannot leave a single seat between an order and a booked seat. Please select again.","e");return;}if((c+intSeats+2)<q.length&&q[c+intSeats+1].childNodes.length&&q[c+intSeats+2].childNodes.length){if(q[c+intSeats+1].childNodes[0].src.match(/1_1/gi)&&q[c+intSeats+2].childNodes[0].src.match(/1_2/gi)){fnCMsgDis("seatErr","You cannot leave a single seat between an order and a booked seat. Please select again.","e");return;}}}if(p[1]){if(c>=2&&q[c].childNodes.length&&q[c-1].childNodes.length&&q[c].childNodes[0].src.match(/1_1/gi)&&q[c-1].childNodes[0].src.match(/1_4/gi)){fnCMsgDis("seatErr","You cannot leave a single seat between chosen seats in your order. Please select again.","e");return;}if((c+intSeats+2)<q.length&&q[c+intSeats+1].childNodes.length&&q[c+intSeats+2].childNodes.length){if(q[c+intSeats+1].childNodes[0].src.match(/1_1/gi)&&q[c+intSeats+2].childNodes[0].src.match(/1_4/gi)){fnCMsgDis("seatErr","You cannot leave a single seat between chosen seats in your order. Please select again.","e");return;}}}if(p[2]){if(c>0&&q[c].childNodes.length!=0){if(q[c].childNodes[0].src.match(/1_1/gi)){if(q[c-1].childNodes.length==0||q[c-1].childNodes[0].nodeValue!=null){fnCMsgDis("seatErr","You cannot leave a single seat between your order and the aisle or wall. Please select again.","e");return;}}}if((c+intSeats)>=(q.length-1)){}else{if((c+intSeats+1)<q.length&&q[c+intSeats+1].childNodes.length==0){}else{if(q[c+intSeats+1].childNodes[0].src.match(/1_1/gi)){if((c+intSeats+1)>=(q.length-1)){fnCMsgDis("seatErr","You cannot leave a single seat between your order and the aisle or wall. Please select again.","e");return;}else{if((c+intSeats+2)<q.length&&q[c+intSeats+2].childNodes.length==0){fnCMsgDis("seatErr","You cannot leave a single seat between your order and the aisle or wall. Please select again.","e");return;}}}}}}try{if(glBT.SVC=="NCET"||glBT.SVC=="NCGT"||glBT.SVC=="NCEX"||glBT.SVC=="NCTT"||glBT.SVC=="NCJB"){for(var h=0;h<n.parentNode.childNodes.length;h++){var a=n.parentNode.childNodes[h];if(a.id==n.id){m=true;a.firstChild.src=imgSrcNew+"1_4.png?v1";aSS.push(a.id);SS+=a.id+"|";blnSeatsSelected=true;if(m>0&&intSeats>0){if(!a.id){break;}a.firstChild.src=imgSrcNew+"1_4.png?v1";b--;intSeats--;break;}}}}else{for(var h=0;h<n.parentNode.childNodes.length;h++){var a=n.parentNode.childNodes[h];if(a.id==n.id&&jq.inArray(a.id,aSS)==-1){m=true;a.firstChild.src=imgSrcNew+"1_4.png?v1";aSS.push(a.id);SS+=a.id+"|";blnSeatsSelected=true;b--;intSeats--;continue;}if(m>0&&intSeats>0){if(!a.id){break;}a.firstChild.src=imgSrcNew+"1_4.png?v1";if(aSS.indexOf(a.id)==-1){aSS.push(a.id);SS+=a.id+"|";}b--;intSeats--;}}}}catch(l){fnErr({fnName:"selectSeats",fnParams:n,err:l});}}function gAS(g){try{var f=new clsCookie();var d=0;var b="";var j=new Array();var a;b=glBT.seats;j=b.split("|");for(var c=0;c<j.length;c++){a=j[c].split("-");if(a[0]==g){d=parseInt(a[1]);break;}}for(var c=0;c<aSS.length;c++){if(isStInA(aSS[c],g)){d--;}}return d;}catch(h){fnErr({fnName:"gAS",fnParams:g,err:h});}return 0;}function isStInA(a,b){try{var d=a.split("_");if(d[0]==b){return true;}}catch(c){fnErr({fnName:"isStInA",fnParams:a+","+b,err:c});}return false;}function fSL(n){try{var c=new Array();var g=new Array();var b=new Array();var m=new Array();var o=new Array();var p="";var h="";p=n.split("||")[0];h=n.split("||")[1];arrTA=p.split("|");glBT.TQ=0;for(var l=0;l<arrTA.length;l++){b=new Array();b.push(arrTA[l].split(":")[1]);b.push(arrTA[l].split(":")[2]);b.push(arrTA[l].split(":")[3]);b.push(arrTA[l].split(":")[0]);b.push(arrTA[l].split(":")[4]);b.push(arrTA[l].split(":")[5]);glBT.TQ+=parseInt(b[5]);aAreas.push(b);}g=h.split("|");for(var f=0;f<g.length;f++){if(g[f]!=""){o=new Array();m=g[f].split(":");for(var d=0;d<m.length;d++){o.push(m[d]);}aRows.push(o);}}}catch(k){fnErr({fnName:"fSL",fnParams:n,err:k});}}function gAC(d){try{for(var a=0;a<aAreas.length;a++){if(aAreas[a][0]==d){return aAreas[a][1];}}}catch(c){var b=new clsCookie();fnErr({fnName:"gAC",fnParams:d,err:c});}}function fnCanTr(){try{fnBusy(true);if(jq("#tblSeatLayout").is(":visible")){fnGATracker({location:"Cl2SeatSel",action:"Close"});}else{if(jq("#oddsm").is(":visible")){fnGATracker({location:"Cl3OdSum",action:"Close"});}}jq("#tblSeatLayout").hide();jq("#oddsm").hide();var b=new clsCookie();var a=b.get({name:"lngTransId",value:""});fnDoTrans({AppC:global.AppC,venCode:glBT.SVC,transId:a,cmd:"CANCELTRANS",p1:"webuser",p2:"",p3:"",p4:"",p5:"",p6:"",p7:"",p8:"",p9:"",p10:"",fnCC:fneSc,fnEC:fneSc});}catch(c){fnErr({fnName:"fnCanTr",err:c});}}function fnCnCl(){try{fnCover(false);fnGATracker({location:"Cl1catqty",action:"Close"});jq("#tblClass, #tblClassMultiCat").hide();}catch(a){fnErr({fnName:"fnCnCl",err:a});}}function fneSc(){try{var a=new clsCookie();fnBusy(false);a.del({name:"lngTransId"});a.del({name:"BOOKINGID"});a.del({name:"merc"});}catch(b){fnErr({fnName:"fneSc",err:b});}}function chkMer(){try{aMer=false;merId=0;if($("mer1").checked||$("mer2").checked){aMer=true;if($("mer1").checked){merId=1;}else{if($("mer2").checked){merId=2;}}}setDisp("dHung",false);}catch(a){fnErr({fnName:arguments.callee.name,err:a});}}function fnsubSetSeats(){try{fnGATracker({location:"Cl2SeatSel",action:"Proceed"});if(valSelSts()==true){blnSeats=true;window.scrollTo(0,0);clSL();sSelSts(SS);if(typeof(fnPush_to_Kis_Wiz)!=="undefined"){fnPush_to_Kis_Wiz("Selected seat","Callout from Buytickets with only seat selection option");}}}catch(a){fnErr({fnName:arguments.callee.name,fnParams:arguments,err:a});}}function valSelSts(){try{var a=new clsCookie();var c=glBT.TQ;if(c>aSS.length){fnCMsgDis("seatErr","Please select exactly "+c+" Seats","e");return false;}return true;}catch(b){fnErr({fnName:"valSelSts",err:b});return false;}}function clSL(){try{var a=new clsCookie();var c=glBT.TQ;if(blnSeats==false){fnCMsgDis("seatErr","Please select exactly "+c+" Seats","e");return;}jq("#tblSeatLayout").hide();}catch(b){fnErr({fnName:"clSL",err:b});}}function sSelSts(a){try{var b=new clsCookie();a="|"+a;a="|"+glBT.TQ+a;a=strReplace(a,"_","|");fnBusy(true);fnDoTrans({AppC:global.AppC,venCode:glBT.SVC,transId:lngTransId,cmd:"SETSELECTEDSEATS",p1:glBT.SSID,p2:a,p3:"",p4:"",p5:"",p6:"",p7:"",p8:"",p9:"",p10:"",fnCC:fnuSI,fnEC:fnCanTr});}catch(c){fnErr({fnName:"sSelSts",fnParams:a,err:c});}}function strReplace(c,d,a){try{while(c.search(d)>0){c=c.replace(d,a);}return c;}catch(b){fnErr({fnName:"strReplace",fnParams:c+","+d+","+a,err:b});}return c;}function fnuSI(){try{var b=new clsCookie();var a=b.get({name:"BOOKINGID",defVal:""});jq("#FLDonation").attr("checked",false);if(jq("#spnSmile").length>0&&glBT.TQ>1){qty=Math.min(glBT.TQ,5);jq("#spnSmile").html("Rs. "+qty);}fnWsData({AppC:global.AppC,venCode:glBT.SVC,transId:lngTransId,cmd:"GETBOOKINGINFOEX",eventType:fnGQS("ety"),evtCode:glBT.SEC,sessId:glBT.SSID,data:escape("|TRANSID="+lngTransId+"|"),fnCC:fnuOS,fnEC:fnCanTr});}catch(c){fnErr({fnName:"fnuSI",err:c});}}var sTot="";function fnuOS(o){try{jq.globalEval(unescape(o));var b=arrSO[0][4];var k=arrSO[0][0];var d=arrSO[0][2];var p=arrSO[0][8];var j=arrSO[0][7];sTot=arrSumm[0][26];var g=arrSO[0][9];var f=arrSumm[0][20];var h=arrSumm[0][19];var c="";if(parseInt(arrSumm[0][15],10)>0&&arrSumm[0][5]=="MT"){if(jq("#descOffer").length>0){jq("#descOffer").remove();}jq(".odsumlft").append('<div id="descOffer" class="offappl" style="">'+arrSumm[0][41]+"</div>");jq(".odsumrgt").css("position","relative");if(jq("#offAppImg").length>0){jq("#offAppImg").remove();}jq(".odcont").after('<img src="http://cnt.in.bookmyshow.com/bmsin/common/offer-applied.png" id="offAppImg" style="position:absolute; top:45px; left:115px; z-index: 1;" alt="">');var n="";n+='<div class="hdr">';n+='<span class="wt90 bold">- Discount: </span>';n+='<span class="wt130">Rs.'+parseFloat(arrSumm[0][15]).toFixed(2)+"</span>";n+="</div>";jq("#discountDiv").remove();jq("#dTickets").after('<div id="discountDiv" class="rptr"></div>');jq("#dOrderSummary #discountDiv").html(n);}jq("#OSEName").html(b);jq("#OSEDtl").children("span").eq(0).html(j+" "+p);jq("#OSEDtl").children("span").eq(1).html(d);jq("#OSTikAmt").children("span").eq(1).html(h);jq("#OSSTInfo").children("span").eq(1).html(g);jq("#OSBKFee").children("span").eq(1).html(f);jq("#OSTotal").children("span").eq(0).html(sTot);jq("#OSFC").hide();jq("#FCDtl").html("");jq("#OSETickets").hide();if(arrShowInfo[0][13]=="Y"){if(arrShowInfo[0][22]=="Y"){jq("#OSETickets").show();jq("#OSETickets #show_eticket").hide();jq("#OSETickets #show_mticket").show();}else{jq("#OSETickets").show();jq("#OSETickets #show_eticket").show();}}jq("#OSTikAmt, #OSBKFee").show();if(jq.inArray(k,glBT.arrNoPriceVenues)!=-1){jq("#OSTikAmt, #OSBKFee").hide();}jq("#dOSNoPrice").hide();if(jq.inArray(k,glBT.arrNoPriceVenues)!=-1){jq("#dOSNoPrice").show();}jq("#dPrithviNotes").hide();if(jq.inArray(k,["PTHV"])!=-1){jq("#dPrithviNotes").show();}if(arrAddChgs.length==0){jq("#dOtherCharges").hide();}else{for(var l=0;l<arrAddChgs.length;l++){c+='<div class="fl_100">';c+='<span class="wt90 bold">+ '+arrAddChgs[l][1]+": </span>";c+='<span class="wt130">'+arrAddChgs[l][0]+"</span>";c+="</div>";}jq("#dOtherCharges").html(c);jq("#dOtherCharges").show();}var m=b.indexOf("3D")>-1;jq("#dDynNotes, #dDynNotes > div").hide();jq("#dDynNotes > div").each(function(){var e=glBT.SVC+(m?"-3D":"");var a=jq(this).attr("id");if(a==e){jq("#dDynNotes").show();jq("#dDynNotes > #"+a).show();}});jq("#dChildNote3Yrs").hide();if(jq.inArray(k,["FNSD","FNAM","FNAS","FNBH","FNBP","FNCH","FNGW","FNKT","FNLK","FNPN","FNAN","FNCM","FNCO","FNBG","FNJJ"])!=-1){jq("#dChildNote3Yrs").show();}jq("#funCinema").hide();if(jq.inArray(k,["FNAS","FNAN","FNCH","FNCM","FNCO","FNSD","FNBG","FNBP","FNAM","FNGW","FNJJ","FNCK","FNKT","FNRC","FNLK","FNBH","FNMT","FNPN","FNPP","FNDB","FNLN","FNHY"])!=-1){jq("#funCinema").show();}fnGFC(glBT.SVC,glBT.SEC,"");fnDoFloat("#oddsm");fnBusy(false);fnCover(true);jq("#oddsm").show();jq(".offappl").fadeOut(500,function(){jq(this).fadeIn();});}catch(i){fnErr({fnName:"fnuOS",fnParams:o,err:i});}}function fnGFC(c,a,b){try{fnAjax({type:"GET",url:"http://"+location.host+"/jsdump.bms",data:"cmd=FDCMB&eid="+glBT.SEC+"&vid="+glBT.SVC+"&sid="+glBT.SSID+"&type=",dataType:"script",success:function(){fnSFC();}});}catch(d){fnErr({fnName:"fnGFC",fnParams:c+", "+a+", "+b,err:d});}}var CntObj={};function fnSFC(){try{var c=new clsCookie();var b="";jq("#DT_Chandigarh").hide();if(arFC.length>0){for(var a=0;a<arFC.length;a++){b+='<div class="combo">';b+='<img src="//cnt.in.bookmyshow.com/bmsin/combo/'+arFC[a][0]+"_"+arFC[a][6]+'.jpg" onerror="this.src=\'//cnt.in.bookmyshow.com/bmsin/callouts/foodc.jpg\'">';if(glBT.SVC!="MSTB"&&glBT.SEC!="ET00012780"){b+='<div class="combotext" style="background:none; display:block;"><b>'+arFC[a][1]+"</b><br/>"+arFC[a][2]+"</div>";}b+='<div class="btm_combo">';b+='<div class="amount">Rs. '+arFC[a][4]+"</div>";b+='<div class="increment">';b+='<a class="minus" style="cursor:pointer;" href="javascript:;" onclick="fnAddFC(\'REMOVE\',\''+arFC[a][0]+"')\"></a>";b+='<input id="FD_'+arFC[a][0]+'" style="width:12px; height:12px;" type="text" class="comboinput" readonly="readonly" value="0"/>';b+='<a class="plus" style="cursor:pointer;" href="javascript:;" onclick="fnAddFC(\'ADD\',\''+arFC[a][0]+"')\"></a>";b+="</div>";b+="</div>";b+="</div>";CntObj[arFC[a][0]]={};CntObj[arFC[a][0]]["added"]=0;if(glBT.SVC=="SNBN"){CntObj[arFC[a][0]]["left"]=10;}else{if(glBT.SVC=="SFSC"){CntObj[arFC[a][0]]["left"]=glBT.TQ*1;}else{CntObj[arFC[a][0]]["left"]=glBT.TQ*2;}}}if(arFC[0][5]=="FD"){jq("#ColMod").show();}if(glBT.SVC.substr(0,2)=="DT"){jq("#DelModeDT").html("The combo will be served on your seats during the interval");jq("#ColMod").hide();}jq("#outerBox >div").html(b);if(arFC.length<=3){jq("#FCPrev").hide();jq("#FCNxt").hide();}else{jq("#FCPrev").show();jq("#FCNxt").show();}jq("#OSFodCmb").show();jq("#ErnPt").hide();}else{jq("#ErnPt").show();jq("#DT_Chandigarh").hide();jq("#OSFodCmb").hide();}}catch(d){fnErr({fnName:"fnSFC",err:d});}}var GnCRCount=1;function fnFrdDC(a){try{var f=Math.ceil(arFC.length/3);switch(a){case"PREV":if(GnCRCount>1){var c=parseInt(jq("#outerBox > div").css("margin-left"),10);var d=c-(-524);jq("#outerBox > div").animate({"margin-left":d+"px"},"fast");GnCRCount--;}break;case"NEXT":if(GnCRCount<f){var c=parseInt(jq("#outerBox > div").css("margin-left"),10);var d=c+(-524);jq("#outerBox > div").animate({"margin-left":d+"px"},"fast");GnCRCount++;}break;}}catch(b){fnErr({fnName:"fnFrdDC",fnParams:a,err:b});}}var FCItm={};function fnAddFC(d,a){try{switch(d){case"ADD":var b=jq("#FD_"+a+"").val();if(CntObj[a]["left"]!=0){jq("#FD_"+a+"").val(parseInt(b,10)+1);CntObj[a]["added"]=parseInt(b,10)+1;fnUpdLft("ADD");}break;case"REMOVE":var b=jq("#FD_"+a+"").val();if(b>0){jq("#FD_"+a+"").val(parseInt(b,10)-1);CntObj[a]["added"]=parseInt(b,10)-1;fnUpdLft("MINUS");}break;}}catch(c){fnErr({fnName:"fnAddFC",fnParams:d+","+a,err:c});}}function fnUpdLft(a){try{switch(a){case"ADD":jq.each(CntObj,function(d,c){CntObj[d]["left"]=parseInt(CntObj[d]["left"])-1;});break;case"MINUS":jq.each(CntObj,function(d,c){CntObj[d]["left"]=parseInt(CntObj[d]["left"])+1;});break;}fnUpdtPrData();}catch(b){fnErr({fnName:"fnUpdLft",fnParams:a,err:b});}}function fnUpdtPrData(){try{var d=[];jq.each(CntObj,function(b,a){if(CntObj[b]["added"]!=0){d.push(b);}});if(d!=""){jq("#FCDtl").html("");}var l=0;for(var h=0;h<d.length;h++){for(var g=0;g<arFC.length;g++){if(d[h]==arFC[g][0]){l=l+(parseInt(CntObj[arFC[g][0]]["added"])*parseInt(arFC[g][4]));jq("#FCDtl").append('<span class="fleft" style="width:190px;">'+arFC[g][1]+'</span><span class="fright bold" style="padding-right:13px;">Qty '+CntObj[arFC[g][0]]["added"]+"</span>");}}}if(d!=""){jq("#OSFC").children().children(".wt75").html("Rs. "+l+".00");var f=sTot.replace("Rs.","");var c=parseFloat(f,10);jq("#OSTotal").children("span").eq(0).html('<span style="font-size:16px;">Loading...</span>');setTimeout('jq("#OSTotal").children(\'span\').eq(0).html("Rs. '+(c+l).toFixed(2)+'");',600);setTimeout("jq('#FCDtl').animate({'height':'show'},'fast'); jq('#OSFC').animate({'height':'show'},'fast');",601);}else{jq("#OSTotal").children("span").eq(0).html('<span style="font-size:16px;">Loading...</span>');setTimeout("jq(\"#OSTotal\").children('span').eq(0).html(sTot);",600);setTimeout("jq('#FCDtl').animate({'height':'hide'},'fast'); jq('#OSFC').animate({'height':'hide'},'fast');",601);}}catch(k){fnErr({fnName:"fnUpdtPrData",err:k});}}var AddCharges=[];function fnSAddChrgs(){try{for(var a=0;a<AddCharges.length;a++){fnDoTrans({venCode:glBT.SVC,transId:lngTransId,cmd:"SETTRANSADDITIONALCHARGES",p1:AddCharges[a],fnEC:fnCanTr});}}catch(b){fnErr({fnName:"fnSAddChrgs",err:b});}}var isDonation=false;var adFC=false;function fnPrePay(){try{fnGATracker({location:"Cl3OdSum",action:"Proceed"});if(glBT.SVC=="SNBN"||glBT.SVC=="TBOH"){var b=jq("#CharityAmt").val();if(b!=""){if(!jq("#chkAddChargeTerms").is(":checked")){fnCMsgDis("CharErr","Please agree to the terms and conditions.","e");return;}else{AddCharges.push(b);}}}if(AddCharges.length!=0){fnSAddChrgs();}if(jq("#FLDonation").is(":checked")){isDonation=true;}if(arrShowInfo[0][13]=="Y"&&arrShowInfo[0][22]!="Y"){if(!jq("#rEticketHO").is(":checked")&&!jq("#rEticketBO").is(":checked")&&!jq("#rMticketHO").is(":checked")){fnCMsgDis("ETickErr","Please select ticket delivery method","e");return;}}if(arrShowInfo[0][13]=="Y"&&arrShowInfo[0][22]=="Y"){if(!jq("#rMticketHO").is(":checked")&&!jq("#rEticketBO").is(":checked")&&!jq("#rEticketHO").is(":checked")){fnCMsgDis("ETickErr","Please select ticket delivery method","e");return;}}if(arrShowInfo[0][12]==3){if(confirm("This movie is 'A' rated and is for audiences above the age of 18. Please carry a valid photo ID/age proof to the theatre. No refund of tickets once bought.")){jq("#oddsm").hide();fnBusy(true);fnAddFCItm();}else{fnCanTr();}}else{jq("#oddsm").hide();fnBusy(true);fnAddFCItm();}}catch(a){fnErr({fnName:"fnPrePay",err:a});}}function fnFCTaken(){try{var b=false;jq.each(CntObj,function(d,c){if(parseInt(CntObj[d]["added"],10)!=0){b=true;}});return b;}catch(a){fnErr({fnName:"fnFCTaken",err:a});}}var intFCCount=0;var arrFCAdd=[];function fnAddFCItm(){try{if(isDonation){fnDoDonation();if(!fnFCTaken()){return;}}if(arFC.length>0){if(fnFCTaken()){jq.each(CntObj,function(c,b){if(CntObj[c].added!=0){intFCCount++;arrFCAdd.push(Array(c,CntObj[c]["added"]));}});fnFCCall();}else{fnGotoPay();}}else{fnGotoPay();}}catch(a){fnErr({fnName:"fnAddFCItm",err:a});}}function fnFCCall(){try{var b;intFCCount--;if(intFCCount==0){fnDoTrans({venCode:glBT.SVC,transId:lngTransId,cmd:"ADDITEMEX",p1:arrFCAdd[intFCCount][0],p2:"1",p3:arrFCAdd[intFCCount][1],p4:"",p5:"",p6:"",p7:"",p8:"",p9:"",p10:"",fnCC:fnSDel});}else{fnDoTrans({venCode:glBT.SVC,transId:lngTransId,cmd:"ADDITEMEX",p1:arrFCAdd[intFCCount][0],p2:"1",p3:arrFCAdd[intFCCount][1],p4:"",p5:"",p6:"",p7:"",p8:"",p9:"",p10:"",fnCC:fnFCCall});}}catch(a){fnErr({fnName:"fnFCCall",err:a});}}function fnDoDonation(){try{var b=1;if(typeof(arrSO)!="undefined"){var b=parseInt(arrSO[0][12],10);b=Math.min(b,5);}if(fnFCTaken()){fnDoTrans({venCode:"BMSI",transId:lngTransId,cmd:"ADDITEMEX",p1:"382",p2:"1",p3:b,p4:"",p5:"",p6:"",p7:"",p8:"",p9:"",p10:"",fnEC:fnCanTr});}else{fnDoTrans({venCode:"BMSI",transId:lngTransId,cmd:"ADDITEMEX",p1:"382",p2:"1",p3:b,p4:"",p5:"",p6:"",p7:"",p8:"",p9:"",p10:"",fnCC:fnGotoPay,fnEC:fnCanTr});}}catch(a){fnErr({fnName:"fnDoDonation",err:a});}}function fnSDel(){try{var a="";if(glBT.SVC.substr(0,2)=="DT"){a="Deliver at Seat: During Interval";}else{a=jq("#selDelMode").val();}fnDoTrans({venCode:glBT.SVC,transId:lngTransId,cmd:"SETINVDELIVERYDETAILS",p1:"",p2:a,p3:"",p4:"",p5:"",p6:"",p7:"",p8:"",p9:"",p10:"",fnCC:fnGotoPay,fnEC:fnCanTr});}catch(b){fnErr({fnName:"fnSDel",err:b});}}function fnGotoPay(){try{var b=jq("#rMticketHO").is(":checked")?"&etk=Y&mtk=Y":"";var a=jq("#rEticketHO").is(":checked")?"&etk=Y":"";setTimeout('fnGoTo("https://'+location.host+"/payment/?cid="+glBT.SVC+"&sid="+glBT.SSID+"&ety="+pet+a+b+'");',3000);}catch(c){fnErr({fnName:"fnGotoPay",err:c});}}function fnPvNx(c,g,f){try{var a=0;for(var b=1;b<=c;b++){if(jq("#"+f+b).css("display")=="block"){a=b;break;}}jQuery("#"+f+a).hide();if(g.toLowerCase()=="pv"){if(a==1){jQuery("#"+f+c).show();}else{jQuery("#"+f+(a-1)).show();}}else{if(g.toLowerCase()=="nx"){if(a==c){jQuery("#"+f+"1").show();}else{jQuery("#"+f+(a+1)).show();}}}jQuery("body").dequeue();}catch(d){fnErr({fnName:"fnPvNx",fnParams:c+","+g+","+f,err:d});}}function fnShFBSeats(a){try{var c=a.replace(/^[|]/,"").replace(/[|]$/,"");var f=c.split("|");for(var b=1;b<f.length;b=b+4){var g;objName="Red_"+f[b]+"_"+f[b+1]+"_"+f[b+2]+"_"+f[b+3];var g=jq("#tblSeatLayout td[name="+objName+"]");g.find("img").eq(0).attr("src",imgSrc+"/fb_chair.gif?v1");selectedPosX=g.offset().left;selectedPosY=g.offset().top;selectedWidth=g.width()*b;jq("#tblSeatInfo").parent().scrollTop(selectedPosY);jq("#tblSeatInfo").parent().scrollLeft(selectedPosX-selectedWidth);}}catch(d){fnErr({fnName:"fnShFBSeats",fnParams:a,err:d});}}function fnClFBSeats(a){try{var c=a.replace(/^[|]/,"").replace(/[|]$/,"");arrSeatData=c.split("|");for(var b=1;b<arrSeatData.length;b=b+4){objName="Red_"+arrSeatData[b]+"_"+arrSeatData[b+1]+"_"+arrSeatData[b+2]+"_"+arrSeatData[b+3];var f=jq("#tblSeatLayout td[name="+objName+"]");f.find("img").eq(0).attr("src",imgSrc+"/R_chair.gif?v1");}}catch(d){fnErr({fnName:"fnClFBSeats",fnParams:a,err:d});}}var ObjTT={},objCk=new clsCookie(),blnVistaCine=false;if(typeof(glBT)==="undefined"){glBT={};}glBT.aDist=new Array();glBT.rCode=fnGRgn();glBT.srCode="";glBT.srCount=0;glBT.minPrice=0;glBT.maxPrice=0;glBT.flMinPr=0;glBT.flMaxPr=0;glBT.minTime=0;glBT.maxTime=0;glBT.flMinTime=0;glBT.flMaxTime=0;glBT.flTxt="";glBT.best=false;glBT.filter=objCk.get({name:"doneOnce",key:"FILTER",defVal:""});glBT.flApp="N";if(global.SignInCallBack==undefined){global.SignInCallBack=[];}global.SignInCallBack.push(function(){fnPgLd(false);});function fnApplyBestBuy(){try{if(glBT.best){glBT.best=false;jq("#aBest").removeClass("bbtnsel");jq("#aBest").addClass("bestbuybtn");}else{glBT.best=true;jq("#aBest").removeClass("bestbuybtn");jq("#aBest").addClass("bbtnsel");}fnPgLd(true);}catch(a){fnErr({fnName:"fnApplyBestBuy",err:a});}}function fnApplyFilters(a){try{jq("#toggle_unavail_shows").attr("checked",false);fnBusy(false);a=(a!=undefined)?a:true;glBT.srCode=glBT.srCode.toString();if(fnGQS("cid","")!=""){glBT.flTxt=jq("#iCinFil").val();glBT.flPlc=jq("#iCinFil").attr("placeholder");}else{glBT.flTxt=jq("#iMvFil").val();glBT.flPlc=jq("#iMvFil").attr("placeholder");}var f=jq("#sldPrice").val();var b=f.split(";");glBT.flMinPr=parseInt(b[0],10);glBT.flMaxPr=parseInt(b[1],10);var i=jq("#sldTime").val();var d=i.split(";");var g=parseInt(parseInt(d[0],10)%60,10);var c=parseInt(parseInt(d[0],10)/60,10);c=(c<10)?"0"+c:c;g=(g<10)?"0"+g:g;glBT.flMinTime=c.toString()+g.toString();var g=parseInt(parseInt(d[1],10)%60,10);var c=parseInt(parseInt(d[1],10)/60,10);c=(c<10)?"0"+c:c;g=(g<10)?"0"+g:g;glBT.flMaxTime=c.toString()+g.toString();fnPgLd(a);}catch(h){fnErr({fnName:"fnApplyFilters",fnParams:a,err:h});}}function fnCalPrices(){try{var a=100000;var d=0;for(var b=0;b<aST.length;b++){if(aST[b][5]!=""&&parseInt(aST[b][5],10)<a){a=parseInt(aST[b][5],10);}if(aST[b][6]!=""&&parseInt(aST[b][6],10)>d){d=parseInt(aST[b][6],10);}}if(a<d){var c=25;a=(a%c==0)?a:a-(a%c);d=(d%c==0)?d:d+c-(d%c);jq("#sldPrice").val(a+";"+d);jq("#sldPrice").slider({from:a,to:d,limits:true,step:25,dimension:"",callback:function(){fnBusy(true);setTimeout("fnApplyFilters();",150);}});}else{jq("#sldPrice").val(a+";"+d);jq("#dFlPr").hide();}glBT.minPrice=a;glBT.maxPrice=d;glBT.flMinPr=a;glBT.flMaxPr=d;}catch(f){fnErr({fnName:"fnCalPrices",err:f});}}function fnCalTime(){try{var a=2359;var d=0;for(var c=0;c<aST.length;c++){if(parseInt(aST[c][4],10)<a){a=parseInt(aST[c][4],10);}if(parseInt(aST[c][4],10)>d){d=parseInt(aST[c][4],10);}}a=(a<1000)?((a<100)?"00"+a:"0"+a):a.toString();d=(d<1000)?((d<100)?"00"+d:"0"+d):d.toString();a=(a=="00")?"00"+a:a;var g=fnTimeCalc({min:a,max:d});var b=g.scaleFrom.split(":");glBT.minTime=b[0]+b[1];glBT.flMinTime=b[0]+b[1];var b=g.scaleTo.split(":");glBT.maxTime=b[0]+b[1];glBT.flMaxTime=b[0]+b[1];if(parseInt(a,10)<parseInt(d,10)){jq("#sldTime").val(g.from+";"+g.to);jq("#sldTime").slider({from:g.from,to:g.to,step:15,dimension:"",limits:false,calculate:function(i){var e=Math.floor(i/60);var h=(i-e*60);return(e<10?"0"+e:e)+":"+(h==0?"00":h);},callback:function(){fnBusy(true);setTimeout("fnApplyFilters();",150);}});}else{jq("#sldTime").val(g.from+";"+g.to);jq("#dFlTym").hide();}}catch(f){fnErr({fnName:"fnCalTime",err:f});}}function fnChkVen(d){try{var b=0;for(var a=0;a<d.length;a++){if(glBT.srCode==d[a][4]){b=a;break;}}return b;}catch(c){fnErr({fnName:"fnCalTime",fnParams:d,err:c});}}function fnChngSR(f){try{var a=f.encDiv;glBT.srCode=f.regCode;var c=new clsCookie();c.set({name:"userCine",key:"lastSR",value:f.regCode});c.set({name:"userCine",key:"lastRC",value:glBT.rCode});jq("#"+a+" .nav > a.selected").removeClass("selected");jq("#"+a+" .nav > a#"+glBT.srCode).addClass("selected");var b=jq("#"+a+" .nav > a.selected").index();fnPgLd(true);fnBg(false);if(typeof(fnPush_to_Kis_Wiz)!=="undefined"){fnPush_to_Kis_Wiz("User click region","");}}catch(d){fnErr({fnName:"fnChngSR",err:d});}}function fnDeg2Rad(a){return a*(Math.PI/180);}function fnFavAdd(a){try{var f=new clsCookie();var c=f.get({name:"ld"});var b=f.get({name:"ld",key:"MEMBEREMAIL"});var d=f.get({name:"ld",key:"LSID"});var h=f.get({name:"ld",key:"MEMBERID",defVal:""});if(c==""){if(global.SignInCallBack==undefined){global.SignInCallBack=[];}global.SignInCallBack.push(function(){fnFavAdd(a);});SignIn.fnSignIn(true);}else{fnBusy(true);fnDoSecureTrans({venCode:a,cmd:"SETPROFILE",p1:"SETFAVORITE",p2:h,p3:d,p4:a,fnCC:fnFavSuc,fnEC:fnFavFail});}}catch(g){fnErr({fnName:"fnFavAdd",fnParams:a,err:g});}}function fnFavFail(){try{fnBusy(false);fnPgLd(true);}catch(a){fnErr({fnName:"fnFavFail",fnParams:strData,err:a});}}function fnFavRmv(a){try{var f=new clsCookie();var c=f.get({name:"ld"});var b=f.get({name:"ld",key:"MEMBEREMAIL"});var d=f.get({name:"ld",key:"LSID"});var h=f.get({name:"ld",key:"MEMBERID",defVal:""});if(c==""){if(global.SignInCallBack==undefined){global.SignInCallBack=[];}global.SignInCallBack.push(function(){fnFavRmv(a);});SignIn.fnSignIn(true);}else{fnBusy(true);fnDoSecureTrans({venCode:a,cmd:"SETPROFILE",p1:"REMOVEFAVORITE",p2:h,p3:d,p4:a,fnCC:fnFavSuc,fnEC:fnFavFail});}}catch(g){fnErr({fnName:"fnFavRmv",fnParams:a,err:g});}}function fnFavSuc(f){try{var b=unescape(f);var d=fnGVal({key:"FAV",data:b});var a=new clsCookie();a.set({name:"ld",key:"FAV",value:d});a.set({name:"userCine",key:"fav",value:d});fnBusy(false);fnPgLd(true);}catch(c){fnErr({fnName:"fnFavSuc",fnParams:f,err:c});}}function fnGDistance(b){try{var d=b.lat1;var l=b.long1;var j=400;var m=new Array();for(var f=0;f<aVN.length;f++){if(aVN[f][10]==glBT.srCode||glBT.srCode=="ALL"||glBT.srCode==""){var c=parseFloat(aVN[f][8]);var h=parseFloat(aVN[f][9]);var a=3959000*Math.acos(Math.cos(fnDeg2Rad(c))*Math.cos(fnDeg2Rad(d))*Math.cos(fnDeg2Rad(l)-fnDeg2Rad(h))+Math.sin(fnDeg2Rad(c))*Math.sin(fnDeg2Rad(d)));a=parseFloat(a).toFixed(2);m.push(aVN[f]);m[m.length-1].push(a);}}if(m.length>0&&m!=undefined){var g=m[0].length-1;var n=jq.extend(true,[],m);n.sort(function(i,e){return(parseFloat(i[g])<parseFloat(e[g]))?-1:(parseFloat(i[g])>parseFloat(e[g]))?1:0;});}if(n==undefined){var n=new Array();}glBT.aDist=n;}catch(k){fnErr({fnName:"fnGDistance",fnParams:b,err:k});}}var blnUnAvailShows=false;function fnGenList(f){try{var D="";var Y=f.type;var J=(f.strSearch!=undefined&&f.strSearch!="")?f.strSearch:"";var H=["VT","VS","BT","SP","VB"];if(Y=="VN"){var v=f.id;var o=(f.fav!=undefined)?f.fav:false;var N=glBT.aDist[v][0];var K=glBT.aDist[v][6];var X=glBT.aDist[v][7];var C=false;var I=false;if(glBT.aDist[v][11]!="SB"&&glBT.aDist[v][11].toUpperCase()!="TG"){I=true;}if(jq.inArray(glBT.aDist[v][0].toUpperCase(),TGCinemas)!=-1){C=true;}var r=false;if(typeof(arrPrintMandat)!="undefined"&&jq.inArray(glBT.aDist[v][0].toUpperCase(),arrPrintMandat)!=-1){r=true;}var E=glBT.aDist[v][3].split(";");var q="";}else{var d=f.id;var n=aEV[d][0];var I,C=false;if(aVN[0][6]!="SB"&&aVN[0][6].toUpperCase()!="TG"){I=true;}if((jq.inArray(aVN[0][0].toUpperCase(),TGCinemas)!=-1)){C=true;}var r=false;if(typeof(arrPrintMandat)!="undefined"&&jq.inArray(aVN[0][0].toUpperCase(),arrPrintMandat)!=-1){r=true;}}if(o=="fav"||o=="mrb"||o=="mrs"||o=="pop"){D+='<div class="listing" style="background: #FFF;">';}else{D+='<div class="listing">';}D+='<div class="cinnm">';D+='<div class="cinhead">';D+='<div class="cinico">';if(Y=="VN"){if(K=="Y"){if(o=="fav"){D+='<a href="javascript:;" onclick="fnFavRmv(\''+N+'\');"><span class="ic-nofav blst" style="margin-right:3px;"></span></a>';}else{D+='<a href="javascript:;" onclick="fnFavAdd(\''+N+'\');"><span class="ic-fav blst" style="margin-right:3px;"></span></a>';}var F="{ divId : 'dMapCont', id	: '"+v+"', type : '1', opts: true, popup: true, height: 500, width: 700 }";D+='<a href="javascript:;" onclick="fnMap('+F+');" class="ic-map navigate"></a>';}if(J!=""){var a=new RegExp("("+J+")","gi");var B=glBT.aDist[v][1].replace(a,"<span class='stselect'>$1</span>");var V=glBT.aDist[v][1];}else{var B=glBT.aDist[v][1];}D+="</div>";var R=(J=="")?fnUrlName(B.toLowerCase()):fnUrlName(V.toLowerCase());if(K=="Y"){D+='<span class="bold">';D+='<a style="color: #000;" href="/buytickets/'+R+"/cinema-"+fnGQS("srid","").toLowerCase()+"-"+N+"-"+fnGQS("ety","")+"/"+fnGQS("did","")+'">';D+=B+((glBT.aDist[v][12]=="Y")?"<img width='25' height='11' alt='New' src='http://cnt.in.bookmyshow.com/in/buytickets/new-animate.gif' align='top' style='margin: 3px 0 0 5px;' />":"");D+="</a>";if(N=="FNAN"){D+=' <a href="http://in.bookmyshow.com/entertainment/new-fun-cinemas/43289" target="_blank"><img src="http://cnt.in.bookmyshow.com/in/buytickets/new-look.png?1" style="position:relative; top: 2px;" /></a>';}for(var W=0;W<aST.length;W++){if(aST[W][0]==glBT.aDist[v][0]){if(aST[W][13]=="Y"){D+='<br><a href="/static/dolby-atmos-tickets/" target="_blank"><img style="position:relative; top: 2px;" src="http://cnt.in.bookmyshow.com/bmsin/static/atmos/dolby-atmos1.png"></a>';break;}}}D+="</span>";}else{D+='<span class="bold">'+B+"</span>";}D+="</div>";if(K=="Y"){var F="{ divId : 'dMapCont', id	: '"+v+"', type : '1', opts: true, popup: true, height: 500, width: 700 }";}}else{if(J!=""){var a=new RegExp("("+J+")","gi");var t=aEV[d][1].replace(a,"<span class='stselect'>$1</span>");}else{var t=aEV[d][1];}var m=aEV[d][4];D+='<span class="bold"><a style="color: #000;" href="/buytickets/'+m.toLowerCase()+"-"+fnUrlName(""+strRegName+"").toLowerCase()+"/movie-"+fnGQS("srid","").toLowerCase()+"-"+n+"-"+fnGQS("ety","")+"/"+fnGQS("did","")+'">'+t+"</a></span>";for(var W=0;W<aST.length;W++){if(aST[W][1]==aEV[d][0]){if(aST[W][13]=="Y"){D+='<br><a href="/static/dolby-atmos-tickets/" target="_blank"><img style="position:relative; top: 2px;" src="http://cnt.in.bookmyshow.com/bmsin/static/atmos/dolby-atmos1.png"></a>';break;}}}D+="</div>";D+="</div>";}D+="</div>";D+='<div class="showlist">';for(var Q=0;Q<aST.length;Q++){var G="";var s=false;var A=false;if(glBT.flMinTime!=glBT.minTime||glBT.flMaxTime!=glBT.maxTime){s=true;}if(s){if(parseInt(aST[Q][4],10)>=parseInt(glBT.flMinTime,10)&&parseInt(aST[Q][4],10)<=parseInt(glBT.flMaxTime,10)&&aST[Q][10]>(glBT.nowDate+glBT.nowTime)){A=true;}}var b=false;var T=false;if(glBT.flMinPr!=glBT.minPrice||glBT.flMaxPr!=glBT.maxPrice){T=true;}if(T){if(parseInt(aST[Q][5])>=parseInt(glBT.flMinPr)){if(parseInt(aST[Q][5])<=parseInt(glBT.flMaxPr)){b=true;}if(parseInt(aST[Q][6])>=parseInt(glBT.flMinPr)&&parseInt(aST[Q][6])<=parseInt(glBT.flMaxPr)){b=true;}}else{if(parseInt(aST[Q][6])>=parseInt(glBT.flMinPr)&&parseInt(aST[Q][6])<=parseInt(glBT.flMaxPr)){b=true;}}}var p=false;var y=false;if(glBT.best){p=true;if(aST[Q][11]=="Y"){y=true;}}var x=false;if(s){if(T){if(p){if(A&&b&&y){x=true;}}else{if(A&&b){x=true;}}}else{if(p){if(A&&y){x=true;}}else{if(A){x=true;}}}}else{if(T){if(aST[Q][10]>(glBT.nowDate+glBT.nowTime)){if(p){if(b&&y){x=true;}}else{if(b){x=true;}}}}else{if(p){if(aST[Q][10]>(glBT.nowDate+glBT.nowTime)){if(y){x=true;}}}}}if(x){G=" stselect";}if(aST[Q][0]==N){D+='<div class="toolpos">';var u='<a><span class="scNfb"></span></a>';if(K=="Y"){var P=fnGFB({vc:aST[Q][0],sid:aST[Q][2]});var z=P.YN;var l=P.fc;var w="";if(z){if(l==1){w="1 friend has booked tickets";}else{w=l+" friends have booked tickets";}u='<a href="javascript:;" title="'+w+'" style="color: #FFF;"><span class="ic-fb scfb"></span></a>';}if(aST[Q][10]>(glBT.nowDate+glBT.nowTime)&&aST[Q][7]=="A"){D+='<span data-online="Y" class="shtime">';D+=u;var k=false;var M=false;for(var S=0;S<aVN.length;S++){if(fnGQS("cid","")!=""){if(aVN[S][0]==aST[Q][0]&&aVN[S][11]=="Y"){k=true;}}else{if(aVN[S][0]==aST[Q][0]&&aVN[S][15]=="Y"){k=true;}}if(aVN[S][0]==aST[Q][0]&&aVN[S][16]!=""){M=true;}}if(jq.inArray(N,["FNAS","FNAN","FNCH","FNCM","FNCO","FNSD","FNBG","FNBP","FNAM","FNGW","FNJJ","FNCK","FNKT","FNRC","FNLK","FNBH","FNMT","FNPN","FNPP","FNDB","FNLN","FNHY"])!=-1){M=true;}if(M){D+='<a href="javascript:;" class="bytclick'+G+'" onclick="blnVistaCine = '+(k?"true":"false")+"; fnPopupSelSh(event, '"+aST[Q][0]+"', '"+aST[Q][2]+"', '"+aST[Q][1]+"', '"+aST[Q][3]+"');\" onmouseover=\"jq('#dAvail_"+aST[Q][0]+"_"+aST[Q][2]+"').show();\" onmouseout=\"jq('#dAvail_"+aST[Q][0]+"_"+aST[Q][2]+"').hide();\">"+aST[Q][3]+"</a>";}else{D+='<a href="javascript:;" class="bytclick'+G+'" onclick="blnVistaCine = '+(k?"true":"false")+"; fnSelSh(event, '"+aST[Q][0]+"', '"+aST[Q][2]+"', '"+aST[Q][1]+"', '"+aST[Q][3]+"');\" onmouseover=\"jq('#dAvail_"+aST[Q][0]+"_"+aST[Q][2]+"').show();\" onmouseout=\"jq('#dAvail_"+aST[Q][0]+"_"+aST[Q][2]+"').hide();\">"+aST[Q][3]+"</a>";}D+="</span>";var g="";var L=0;for(var O=0;O<aAV.length;O++){if(aAV[O][0]==aST[Q][0]&&aAV[O][1]==aST[Q][2]){g+='<div class="innshpn">';if(!C&&jq.inArray(N,glBT.arrNoPriceVenues)==-1){g+='<span class="bold">Rs. '+aAV[O][4]+"</span>";}g+='<span class="bold" style="font-size: 9px;">'+aAV[O][3].substr(0,10)+"</span>";if(I){if(parseInt(aAV[O][7])>=50){g+='<span class="available">Available</span>';}else{if(parseInt(aAV[O][7])>=20&&parseInt(aAV[O][7])<50){g+='<span class="fillfast">Filling Fast</span>';}else{if(parseInt(aAV[O][7])>0&&parseInt(aAV[O][7])<=20){g+='<span class="almost">Almost Full</span>';}else{if(parseInt(aAV[O][7])<=0){g+='<span class="soldout">Sold Out</span>';}}}}}g+="</div>";L++;}}var c="";if(!I||jq.inArray(N,glBT.arrNoPriceVenues)!=-1){L=(aST[Q][13]=="Y")?((L==1)?1.1:L):L;c=(aST[Q][13]=="Y")?"margin-top:-75px":"margin-top:-55px";}else{L=(aST[Q][13]=="Y")?((L==1)?1.1:L):L;c=(aST[Q][13]=="Y")?"margin-top:-91px":"margin-top:-70px";}if(C){if(I){c="margin-top:-55px";}else{c="margin-top:-39px";}}D+='<div class="shpn" style="display:none; width: '+L*75+"px;"+c+'" id="dAvail_'+aST[Q][0]+"_"+aST[Q][2]+'">';D+=g;if(aST[Q][13]=="Y"){D+='<div class="fl_100" style="border-top: 1px solid #ccc; margin-bottom: -5px; margin-top: 3px;text-align: center;">';D+='<a href="/static/dolby-atmos-tickets/" target="_blank"><img style="position:relative; top: 2px;" src="http://cnt.in.bookmyshow.com/bmsin/static/atmos/dolby-atmos1.png"></a>';D+="</div>";}D+="</div>";}else{blnUnAvailShows=true;D+='<span data-online="N" class="shtime '+G+'">'+u+aST[Q][3]+"</span>";}}else{blnUnAvailShows=true;D+='<span data-online="N" class="shtime '+G+'">'+u+aST[Q][3]+"</span>";}D+="</div>";}else{if(aST[Q][1]==n){D+='<div class="toolpos">';var P=fnGFB({vc:aST[Q][0],sid:aST[Q][2]});var z=P.YN;var l=P.fc;var w="";var u='<a><span class="scNfb"></span></a>';if(z){if(l==1){w="1 friend has booked tickets";}else{w=l+" friends have booked tickets";}u='<a href="javascript:;" title="'+w+'" style="color: #FFF;"><span class="ic-fb scfb"></span></a>';}if(aST[Q][10]>(glBT.nowDate+glBT.nowTime)&&aST[Q][7]=="A"){D+='<span data-online="Y" class="shtime">';D+=u;var k=false;var M=false;for(var S=0;S<aVN.length;S++){if(fnGQS("cid","")!=""){if(aVN[S][0]==aST[Q][0]&&aVN[S][11]=="Y"){k=true;}}else{if(aVN[S][0]==aST[Q][0]&&aVN[S][15]=="Y"){k=true;}}if(aVN[S][0]==aST[Q][0]&&aVN[S][12]!=""){M=true;}}if(jq.inArray(aVN[0][0],["FNAS","FNAN","FNCH","FNCM","FNCO","FNSD","FNBG","FNBP","FNAM","FNGW","FNJJ","FNCK","FNKT","FNRC","FNLK","FNBH","FNMT","FNPN","FNPP","FNDB","FNLN","FNHY"])!=-1){M=true;}if(M){D+='<a href="javascript:;" class="bytclick'+G+'" onclick="blnVistaCine = '+(k?"true":"false")+"; fnPopupSelSh(event, '"+aST[Q][0]+"', '"+aST[Q][2]+"', '"+aST[Q][1]+"', '"+aST[Q][3]+"');\" onmouseover=\"jq('#dAvail_"+aST[Q][0]+"_"+aST[Q][2]+"').show();\" onmouseout=\"jq('#dAvail_"+aST[Q][0]+"_"+aST[Q][2]+"').hide();\">"+aST[Q][3]+"</a>";}else{D+='<a href="javascript:;" class="bytclick'+G+'" onclick="blnVistaCine = '+(k?"true":"false")+"; fnSelSh(event, '"+aST[Q][0]+"', '"+aST[Q][2]+"', '"+aST[Q][1]+"', '"+aST[Q][3]+"');\" onmouseover=\"jq('#dAvail_"+aST[Q][0]+"_"+aST[Q][2]+"').show();\" onmouseout=\"jq('#dAvail_"+aST[Q][0]+"_"+aST[Q][2]+"').hide();\">"+aST[Q][3]+"</a>";}D+="</span>";var g="";var L=0;for(var O=0;O<aAV.length;O++){if(aAV[O][0]==aST[Q][0]&&aAV[O][1]==aST[Q][2]){g+='<div class="innshpn">';if(!C&&jq.inArray(aVN[0][0],glBT.arrNoPriceVenues)==-1){g+='<span class="bold">Rs. '+aAV[O][4]+"</span>";}g+='<span class="bold" style="font-size: 9px;">'+aAV[O][3].substr(0,10)+"</span>";if(I){if(parseInt(aAV[O][7])>=50){g+='<span class="available">Available</span>';}else{if(parseInt(aAV[O][7])>=20&&parseInt(aAV[O][7])<50){g+='<span class="fillfast">Filling Fast</span>';}else{if(parseInt(aAV[O][7])>0&&parseInt(aAV[O][7])<=20){g+='<span class="almost">Almost Full</span>';}else{if(parseInt(aAV[O][7])<=0){g+='<span class="soldout">Sold Out</span>';}}}}}g+="</div>";L++;}}var c="";if(!I||jq.inArray(aVN[0][0],glBT.arrNoPriceVenues)!=-1){L=(aST[Q][13]=="Y")?((L==1)?1.1:L):L;c=(aST[Q][13]=="Y")?"margin-top:-85px":"margin-top:-55px";}else{L=(aST[Q][13]=="Y")?((L==1)?1.1:L):L;c=(aST[Q][13]=="Y")?"margin-top:-85px":"margin-top:-70px";}if(C){if(I){c="margin-top:-55px";}else{c="margin-top:-39px";}}D+='<div class="shpn" style="display:none; width: '+L*75+"px;"+c+'" id="dAvail_'+aST[Q][0]+"_"+aST[Q][2]+'">';D+=g;if(aST[Q][13]=="Y"){D+='<div class="fl_100" style="border-top: 1px solid #ccc; margin-bottom: -5px; margin-top: 3px;text-align: center;">';D+='<a href="/static/dolby-atmos-tickets/" target="_blank"><img style="position:relative; top: 2px;" src="http://cnt.in.bookmyshow.com/bmsin/static/atmos/dolby-atmos2.png"></a>';D+="</div>";}D+='<span class="shpnarr"></span>';D+="</div>";}else{blnUnAvailShows=true;D+='<span data-online="N" class="shtime '+G+'">'+u+aST[Q][3]+"</span>";}D+="</div>";}}}D+="</div>";D+="</div>";return D;}catch(U){fnErr({fnName:"fnGenList",fnParams:f,err:U});}}function fnGenLSB(b){try{var h=(b!=undefined&&b.type!=undefined&&b.type!="")?b.type:"ET";var a="";if(h=="VN"){a+='<div class="lftblocks">';a+='<div class="hd"><span>Looking for a specific movie?</span></div>';a+='<input type="text" class="cintextbox" id="iCinFil" placeholder="Type a movie name to filter" onkeyup="fnApplyFilters();"/>';a+='<div id="flt_unavail_box" class="fltr-unavail" style="{display}"><span style="float:left;"><input id="toggle_unavail_shows" type="checkbox" onClick="fnFilter_unavail_shows();" /></span><span class="flt-text">Hide unavailable shows</span></div>';a+="</div>";var g="#iCinFil";}else{a+='<div class="lftblocks">';a+='<div class="hd"><span>Looking for a specific cinema?</span></div>';a+='<input type="text" id="iMvFil" placeholder="Type a cinema name to filter" class="cintextbox" onkeyup="fnApplyFilters();"/>';a+='<div id="flt_unavail_box" class="fltr-unavail" style="{display}"><span style="float:left;"><input id="toggle_unavail_shows" type="checkbox" onClick="fnFilter_unavail_shows();" /></span><span class="flt-text">Hide unavailable shows</span></div>';a+="</div>";var g="#iMvFil";}a+='<div class="lftblocks mless">';a+='<span class="moreless plusnew" data-type="more" onClick="fnShowFilters();"></span>';a+='<div id="id_fltr" style="float:left; font-size:11px; margin-left: 10px;"><a href="javascript:;" onClick="fnShowFilters();">Filter by Showtimes or Price</a></div>';a+="</div>";a+='<div class="lftblocks" id="dFlTym" style="display:none;">';a+='<div class="hd"><span>Showtimes</span></div>';a+='<div class="fl_100">';a+='<div class="layout-slider">';a+='<input id="sldTime" type="slider" name="area" value="600;720" />';a+="</div>";a+="</div>";a+="</div>";a+='<div class="lftblocks" id="dFlPr" style="display:none;">';a+='<div class="hd"><span>Price (in Rupees)</span></div>';a+='<div class="fl_100">';a+='<div class="layout-slider">';a+='<input id="sldPrice" type="slider" name="area" value="600;720" />';a+="</div>";a+="</div>";a+="</div>";if(h=="VN"){a+='<div class="wtexture venuedet">';a+='<img src="//cnt.in.bookmyshow.com/in/venues/'+aVN[0][0]+".jpg?"+glBT.iv+'" class="mapVen" onerror="this.src=\'http://cnt.in.bookmyshow.com/in/venues/NoImage.jpg\';"/>';a+="<div>";a+='<div class="add">Add :</div>';a+='<div class="address">'+aVN[0][2]+"</div>";a+="</div>";if(aVN[0][3]!=""){a+="<div>";var j=(aVN[0][3]!=";")?aVN[0][3].split(";"):[];if(j.length>0){a+='<div class="add">Facilities :</div>';}for(var c=0;c<j.length;c++){a+='<div class="fl_100 pb5">';switch(j[c].toUpperCase()){case"CAR":a+='<div class="ic-car legblack"></div>';a+='<div class="factext">Parking</div>';break;case"COMBO":a+='<div class="ic-combo legblack"></div>';a+='<div class="factext">Food Combo</div>';break;case"FOD":a+='<div class="ic-fcourt legblack"></div>';a+='<div class="factext">Food Court</div>';break;case"GAM":a+='<div class="ic-gaming legblack"></div>';a+='<div class="factext">Gaming Zone</div>';break;case"LC":a+='<div class="ic-loyalty legblack"></div>';a+='<div class="factext">Loyalty Cards</div>';break;case"REC":a+='<div class="ic-recliner legblack"></div>';a+='<div class="factext">Recliner Seats</div>';break;case"WC":a+='<div class="ic-handicap legblack"></div>';a+='<div class="factext">Handicap Facility</div>';break;case"KTP":a+='<div class="legblack"><img src="http://cnt.in.bookmyshow.com/bmsin/common/Kiosk-2.png"/></div>';a+='<div class="factext">Kiosk Ticket Pick-Up</div>';default:a+="";}a+="</div>";}a+="</div>";}if(aVN[0][0]=="RLBG"){a+='<img src="//cnt.in.bookmyshow.com/bmsin/buytickets/alcohol.jpg?'+glBT.iv+'" class="mapVen" onerror="this.src=\'http://cnt.in.bookmyshow.com/in/venues/NoImage.jpg\';"/>';}a+="</div>";}if(h=="ET"){var m=fnGQS("srid","");var f=0;var k="";k+='<div class="yellowsec bordertab tabsbt" style="display: block;">';k+='<div class="instBook nav">';for(var c=0;c<aiReg.length;c++){if(aiReg[c][2].toUpperCase()=="MSOUT"||aiReg[c][2].toUpperCase()=="MUMB"||aiReg[c][2].toUpperCase()=="BANE"){continue;}if(aiReg[c][0].toUpperCase()==m.toUpperCase()){f++;if(f==1){glBT.srCode=aiReg[c][2];addClass=" selected";}else{addClass="";}k+='<a class="bold'+addClass+'" href="javascript:;" id="'+aiReg[c][2]+"\" onclick=\"fnChngSR({ encDiv: 'dSRList', regCode: '"+aiReg[c][2]+"', rc: '"+glBT.regCode+"' });\">"+aiReg[c][3]+"</a>";k+='<div class="navsep"></div>';}}jq("#intSRCounter").hide();jq("#dSRIco").hide();if(f>1){k+='<a class="bold" href="javascript:;" id="ALL" onclick="fnChngSR({ encDiv: \'dSRList\', regCode: \'ALL\', rc: \''+glBT.regCode+"' });\">All</a>";jq("#dSRList").html(k);jq("#dSRList").show();jq("#intSRCounter").show();jq("#dSRIco").show();}}var l=false;for(var c=0;c<aST.length;c++){if(aST[c][11]=="Y"){l=true;break;}}if(h=="ET"&&l){a+='<div class="besybuybl">';a+='<a href="javascript:;" id="aBest" onclick="fnApplyBestBuy();" class="bbtnsel">Best Buy</a>';a+="</div>";}if(blnUnAvailShows){a=a.replace("{display}","display: block;");}else{a=a.replace("{display}","display: none;");}jq("#dLSBContent").html(a);if(jq.browser.msie){jq(g).setAltText();}fnCalPrices();fnCalTime();}catch(d){fnErr({fnName:"fnGenLSB",fnParams:b,err:d});}}function fnGFav(){try{var n=new clsCookie();var f=n.get({name:"userCine",key:"fav",defVal:""});var m=n.get({name:"userCine",key:"mrb",defVal:""});var c=n.get({name:"userCine",key:"mrs",defVal:""});var o=n.get({name:"userCine",key:"pop",defVal:""});var b=new Array();if(f!=""){var k=new Array();k=f.split(";");for(var g=0;g<k.length;g++){for(var h=0;h<aVN.length;h++){if(aVN[h][0]==k[g]){b.push(new Array(k[g],aVN[h][8],aVN[h][9],"fav",aVN[h][10]));break;}}}}else{if(m!=""){var p=new Array();p=m.split(";");for(var g=0;g<p.length;g++){for(var h=0;h<aVN.length;h++){if(aVN[h][0]==p[g]){b.push(new Array(p[g],aVN[h][8],aVN[h][9],"mrb",aVN[h][10]));break;}}}}else{if(c!=""){var d=new Array();d=c.split(";");for(var g=0;g<d.length;g++){for(var h=0;h<aVN.length;h++){if(aVN[h][0]==d[g]){b.push(new Array(d[g],aVN[h][8],aVN[h][9],"mrs",aVN[h][10]));break;}}}}else{if(o!=""){var a=new Array();a=o.split(";");for(var g=0;g<a.length;g++){for(var h=0;h<aVN.length;h++){if(aVN[h][0]==a[g]){b.push(new Array(a[g],aVN[h][8],aVN[h][9],"pop",aVN[h][10]));break;}}}}}}}return b;}catch(l){fnErr({fnName:"fnGFav",err:l});}}function fnGFB(h){try{var a=(h!=undefined&&h.vc!="")?h.vc:"";var f=(h!=undefined&&h.sid!="")?h.sid:"";var b=0;var d=false;if(arrFBInfo!=undefined){for(var c=0;c<arrFBInfo.length;c++){if(arrFBInfo[c][1]==a&&arrFBInfo[c][2]==f){d=true;b++;}}}return{YN:d,fc:b};}catch(g){fnErr({fnName:"fnGFB",fnParams:h,err:g});}}function fnLdEv(n){try{var x=(fnGQS("ety","")=="MT")?"movies":"plays";var l=0;var B="";var p=0;B=(intAvgRating>49)?"ic-hrt smheart":"ic-hrtdn smheartg";var D="";if(intAvgRating>0){D+="<div>";D+='<div class="tabspg"></div>';D+='<div class="'+B+'"></div>';D+='<div class="fleft percent avgrat"><span>'+intAvgRating+"</span> <sup>%</sup></div>";D+="</div>";}jq("#spnHead").html(D);jq("#bcmn").html('<a itemprop="url" href="/movies/'+aEV[0][5]+"/"+aEV[0][0]+'"><span itemprop="title">'+aEV[0][4]+"</span></a>");var z="";var g="";var o="";var y="";var b="";var s="";var m=fnGFav();if(m.length>0){var u=fnChkVen(m);var c=parseFloat(m[u][1]);var a=parseFloat(m[u][2]);}else{var c=parseFloat(aVN[0][8]);var a=parseFloat(aVN[0][9]);}fnGDistance({lat1:c,long1:a});var q=false;for(var t=0;t<m.length;t++){for(var w=0;w<glBT.aDist.length;w++){if(glBT.aDist[w][0]==m[0][0]){jq("#spnNearCine").html(glBT.aDist[w][1]);}if(glBT.aDist[w][0]==m[t][0]){if(glBT.flTxt!=""&&glBT.flTxt!=glBT.flPlc){var v=glBT.flTxt.replace(/^(\s|\W)+|(\s|\W)+$/g,"").replace(/(\s|\W)+/g,"|");var h=new RegExp(v,"gi");if(glBT.aDist[w][1].match(h)==null){continue;}q=true;}if(glBT.srCode!=""&&glBT.srCode!="ALL"){if(glBT.aDist[w][10].toUpperCase()!=glBT.srCode.toUpperCase()){continue;}}d=true;isFav=m[t][3];if(q){s+=fnGenList({type:"VN",id:w,fav:isFav,strSearch:v});}else{g+=fnGenList({type:"VN",id:w,fav:isFav,strSearch:v});}}}}for(var w=0;w<glBT.aDist.length;w++){if(glBT.flTxt!=""&&glBT.flTxt!=glBT.flPlc){var v=glBT.flTxt.replace(/^(\s|\W)+|(\s|\W)+$/g,"").replace(/(\s|\W)+/g,"|");var h=new RegExp(v,"gi");if(glBT.aDist[w][1].match(h)==null){continue;}}if(glBT.srCode!=""&&glBT.srCode!="ALL"){if(glBT.aDist[w][10].toUpperCase()!=glBT.srCode.toUpperCase()){continue;}}var d=false;for(var t=0;t<m.length;t++){if(glBT.aDist[w][0]==m[t][0]){d=true;break;}}var F=false;if(q&&glBT.aDist[w][6]=="Y"){if(!d){s+=fnGenList({type:"VN",id:w,strSearch:v});}}else{if(q&&glBT.aDist[w][6]!="Y"){b+=fnGenList({type:"VN",id:w,strSearch:v});}else{if(d){continue;}else{if(F){o+=fnGenList({type:"VN",id:w,strSearch:v});}else{if(glBT.aDist[w][6]=="Y"){y+=fnGenList({type:"VN",id:w,strSearch:v});}else{b+=fnGenList({type:"VN",id:w,strSearch:v});}}}}}}jq("#dFaveList").html(g);if(g!=""){var r="";switch(m[0][3].toUpperCase()){case"FAV":r="Your Favourite Cinema(s)";break;case"MRB":r="Your Most Recently Booked Cinema(s)";break;case"MRS":r="Your Most Recently Surfed Cinema(s)";break;case"POP":r="Preferred Cinema(s)";break;default:r="Cinema List";}jq("#dFaveListTitle").html(r);jq("#dFave").fadeIn("fast");jq("#spnNearCine").html(r);}else{jq("#dFave").hide();}jq("#dNearFaveList").html(o);if(o!=""){jq("#dNearFave").fadeIn("fast");}else{jq("#dNearFave").hide();}jq("#dOtherCineList").html(y);if(y!=""){jq("#dOtherCine").fadeIn("fast");}else{jq("#dOtherCine").hide();}jq("#dOfflineList").html(b);if(b!=""){jq("#dOffline").fadeIn("fast");}else{jq("#dOffline").hide();}jq("#dFilterList").html(s);if(s!=""){jq("#dFilter").fadeIn("fast");}else{jq("#dFilter").hide();}if(!n){fnGenLSB();}jq("#dNoCineList").hide();jq("#dLSBMapCont").show();if(g==""&&o==""&&y==""&&b==""&&s==""){jq("#intSRCounter").hide();jq("#dNoCineList").fadeIn("fast");jq("#dLSBMapCont").hide();}else{if(glBT.srCount>1){jq("#intSRCounter").fadeIn("fast");}}var f=new clsCookie();var E=f.get({name:"userCine",defVal:"",key:"lastSR"});var C=f.get({name:"userCine",defVal:"",key:"lastRC"});var k=fnGRgn();if(E!=glBT.srCode){if(E==""){fnChngSR({encDiv:"dSRList",regCode:"ALL",rc:glBT.rCode});}else{if(k==C){fnChngSR({encDiv:"dSRList",regCode:E,rc:glBT.rCode});}}}}catch(A){fnErr({fnName:"fnLdEv",err:A});}}function fnLdVn(a){try{var d=(fnGQS("ety","")=="MT")?"cinemas":"theatres";var c="";c+='<span style="font-weight: normal;" class="fleft">Book Tickets at&nbsp;</span>';c+='<span class="b000 fleft">'+aVN[0][1]+"</span>";c+='<span class="line-effect"></span>';c+="<div>&nbsp;</div>";jq("#spnHead").html(c);jq("#bcmn").html('<a itemprop="url" href="/cinemas/'+fnUrlName(aVN[0][1].toLowerCase())+"/"+aVN[0][0]+'"><span itemprop="title">'+aVN[0][1]+"</span></a>");var b="";for(var g=0;g<aEV.length;g++){if(glBT.flTxt!=""&&glBT.flTxt!=glBT.flPlc){var f=glBT.flTxt.replace(/^(\s|\W)+|(\s|\W)+$/g,"").replace(/(\s|\W)+/g,"|");var h=new RegExp(f,"gi");if(aEV[g][1].match(h)==null){continue;}}b+=fnGenList({type:"ET",id:g,strSearch:f});}if(b!=""){jq("#dMoviesList").html(b);jq("#dMovies").show();}else{jq("#dMoviesList").html("No movies match your search");jq("#dMovies").show();}if(!a){fnGenLSB({type:"VN"});}}catch(j){fnErr({fnName:"fnLdVn",err:j});}}function fnLSB(b){try{var a=b||jq("#dLSB").is(":visible");if(b){jq("#dLSB").animate({width:"toggle",opacity:"toggle"},100);}else{jq("#dLSB").animate({width:"toggle",opacity:"toggle"},"slow");}jq("#dTogLSB > span").toggleClass("ic-arrt");var c=new clsCookie();c.set({name:"doneOnce",value:(a?"Y":"N"),key:"FILTER"});}catch(d){fnErr({fnName:"fnLSB",fnParams:b,err:d});}}function fnMap(f){try{if(f!=undefined){var o=(f.type!=undefined&&f.type!="")?f.type:2;var l=(f.id!=undefined&&f.id!="")?f.id:"";var c=(f.venType!=undefined&&f.venType!="MT")?"theatres":"cinemas";var p=(f.divId!=undefined&&f.divId!="")?f.divId:"";var m=(f.height!=undefined&&f.height!="")?f.height:500;var h=(f.width!=undefined&&f.width!="")?f.width:700;var g=(f.opts!=undefined)?f.opts:false;var d={showInfoBox:g,settings:{draggable:g,mapTypeControl:g,navigationControl:g,scrollwheel:g}};var a={};if(o==2){for(var j=0;j<glBT.aDist.length;j++){if(glBT.aDist[j][6]=="Y"&&glBT.aDist[j][8]!=0&&glBT.aDist[j][9]!=0){a[glBT.aDist[j][0]]={address:glBT.aDist[j][2],lat:glBT.aDist[j][8],legends:glBT.aDist[j][3],link:"/buytickets/?srid="+fnGQS("srid","")+"&cid="+glBT.aDist[j][0]+"&eid=&did="+fnGQS("did",""),lng:glBT.aDist[j][9],title:glBT.aDist[j][1]};}}}else{a[glBT.aDist[l][0]]={address:glBT.aDist[l][2],lat:glBT.aDist[l][8],legends:glBT.aDist[l][3],link:"/buytickets/?srid="+fnGQS("srid","")+"&cid="+glBT.aDist[l][0]+"&eid=&did="+fnGQS("did",""),lng:glBT.aDist[l][9],title:glBT.aDist[l][1]};}var r={DOMId:p,height:m,mapOpt:d,width:h};var b=(f.popup!=undefined)?f.popup:false;if(jq.browser.msie){var k=0;for(var q in a){if(a.hasOwnProperty(q)){k++;break;}}if(k==0){jq("#dLSBMapCont").hide();}else{if(b){fnShowMap({height:m,width:h});}createMap(a,r);}}else{if(Object.keys(a).length>0){if(b){fnShowMap({height:m,width:h});}createMap(a,r);}else{jq("#dLSBMapCont").hide();}}}}catch(n){fnErr({fnName:"fnMap",params:f,err:n,supp:false});}}function fnPgLd(k){try{var l=new clsCookie();var b=l.get({name:"ld",key:"ISFCONNECTLOGIN",defVal:""});var j=l.get({name:"doneOnce",key:"FILTER",defVal:""});var m=fnGQS("srid","");var h=0;for(var c=0;c<aiReg.length;c++){if(aiReg[c][2].toUpperCase()=="MSOUT"||aiReg[c][2].toUpperCase()=="MUMB"||aiReg[c][2].toUpperCase()=="BANE"){continue;}if(aiReg[c][0].toUpperCase()==m.toUpperCase()){h++;if(h==1&&glBT.srCode==""){glBT.srCode=aiReg[c][2];}}}if(h>1){var l=new clsCookie();var f=l.get({name:"userCine",defVal:"",key:"lastSR"});var d=l.get({name:"userCine",defVal:"",key:"lastRC"});var a=fnGRgn();if(f!=""&&a==d){glBT.srCode=f;}}if(h==1){glBT.srCode="ALL";}glBT.srCount=h;if(!k&&arrFBInfo==undefined){if(b=="Y"){fnAjax({data:"cmd=GETFBINFO",dataType:"script",error:function(i,o,n){var e=new Array();if(fnGQS("cid","")!=""){fnLdVn(k);}else{fnLdEv(k);}},success:function(e){if(fnGQS("cid","")!=""){fnLdVn(k);}else{fnLdEv(k);}},url:global.ajHTML});}}else{if(fnGQS("cid","")&&fnGQS("cid","")!=""){fnLdVn(k);}else{fnLdEv(k);}}if(glBT.filter=="Y"&&glBT.flApp!="Y"){glBT.flApp="Y";fnLSB(true);}}catch(g){fnErr({fnName:"fnPgLd",err:g});}}function fnShowMap(f){try{if(f!=undefined){var b=(f.divId!=undefined&&f.divId!="")?f.divId:"dMainMap";var a=(f.height!=undefined&&f.height!="")?f.height:500;var c=(f.width!=undefined&&f.width!="")?f.width:500;jq("#"+b).css({display:"none",left:"0px",position:"absolute",top:"0px",width:c+0+"px",zIndex:"997"});jq("#dMainCont").css({width:c+0+"px"});jq("#dMapCont").css({width:c+0+"px"});fnCover(true);fnDoFloat("#"+b).fadeIn("slow");}}catch(d){fnErr({fnName:"fnShowMap",params:f,err:d});}}function fnTimeCalc(c){try{var d=c.min;var h=c.max.toString();var f=parseInt(d.substring(0,2),10);var k=parseInt(d.substring(2,4),10);if(k%15!=0){var b=k%15;if(k>=b){k=k-b;}else{k=k-b+60;f=f-1;}}var a=((f<10)?"0"+f:f)+":"+((k<10)?"0"+k:k);var j=f*60+k;var f=parseInt(h.substring(0,2),10);var k=parseInt(h.substring(2,4),10);if(k%15!=0){var b=k%15;if((k+(15-b))<60){k=k+(15-b);}else{k=k+(15-b)-60;f=f+1;}}var l=((f<10)?"0"+f:f)+":"+((k<10)?"0"+k:k);var i=f*60+k;return{from:j,to:i,scaleFrom:a,scaleTo:l};}catch(g){fnErr({fnName:"fnTimeCalc",err:g});}}SignIn.fnClose=function(f){try{if(f&&f.callBack==true){if(global.SignInCallBack!=undefined&&global.SignInCallBack.length>0){for(var b=0;b<global.SignInCallBack.length;b++){global.SignInCallBack[b].apply();}}}fnGATracker({location:"SignInBox",action:"NoThanks"});jq("#dSignIn").fadeOut("fast");var c=new clsCookie();c.set({name:"doneOnce",key:"SIGNIN",value:"Y",sess:true});fnCover(false);if(global.SignInCallBack!=undefined){global.SignInCallBack.splice(global.SignInCallBack.length-1,1);}if(global.SignOutCallBack!=undefined){global.SignOutCallBack.splice(global.SignOutCallBack.length-1,1);}}catch(d){fnErr({fnName:"SignIn.fnClose",err:d});}};function fnClNoSeatCallout(){try{var a=new clsCookie();var c=a.get({name:"lngTransId"});if(c==""){fnCover(false);jq("#NoSeats").hide();}else{jq("#NoSeats").hide();fnBusy(true);fnDoTrans({AppC:global.AppC,venCode:glBT.SVC,transId:c,cmd:"CANCELTRANS",p1:"webuser",fnCC:fneSc,fnEC:fneSc});}}catch(b){fnErr({fnName:"fnClNoSeatCallout",err:b});}}function fnLoadDate(){try{var r=0,q=0,p=0,v="",d=[],m={},x=jq("#rdbMovie").is(":checked")?"ET":"VN",t=(x=="ET")?Ecode:Cinema_id;for(r=0;r<aiSD.length;r++){if(jq.inArray(aiSD[r][3],d)==-1){m[aiSD[r][3]]=aiSD[r][4];d.push(aiSD[r][3]);}}d.sort();if(cmbMovie.getCurrent().value!=t||fnGRgn()!=glBT.rCode){fnBusy(true);var w=fnGRgn(),f=x=="ET"?cmbMovie.getCurrent().value:"",a=x=="VN"?cmbMovie.getCurrent().value:"",h=(d.length==0)?dtToday:(jq.inArray(urlDate,d)==-1)?d[0]:urlDate;var u=aiReg[0][1],l="/buytickets/";var c="";for(var r=0;r<aiEV.length;r++){if(cmbMovie.getCurrent().value==aiEV[r][1]){c=aiEV[r][10];break;}}l+=(x=="ET")?(c+"-"+fnUrlName(u.toLowerCase())):fnUrlName(cmbMovie.getCurrent().name.toLowerCase());l+="/"+((x=="ET")?"movie":"cinema")+"-"+w.toLowerCase()+"-"+((x=="ET")?f:a)+"-MT/"+h;fnGoTo(l);return;}var v='<a data-slide="prev" href="#carousel" class="left carousel-control chng previous diagonal_lines_leftNav"><span class="ic-arlt ndate"></span></a>';var n=false;for(p;p<d.length;p+=1){var g=(urlDate==d[p])?"today chosen":"today";if(p===0||p===(q+1)){var b=d.slice(0);if(jq.inArray(urlDate,b.splice(p,6))!=-1){v+='<div class="item active">';v+='<div class="carholder">';n=true;}else{v+='<div class="item">';v+='<div class="fl_100">';}q+=5;}v+=(dtToday==d[p])?'<a class="'+g+'" data-date="'+d[p]+'" data-disp_date="'+m[d[p]]+'">TODAY<br/><span>'+d[p].slice(6,8)+"</span></a>":'<a data-date="'+d[p]+'" data-disp_date="'+m[d[p]]+'" class="{class}">'+fnGFDate(d[p])+"<br/><span>"+d[p].slice(6,8)+"</span></a>";if((q===p&&p!==0)||p===(d.length-1)){v+="</div>";v+="</div>";}if(dtToday!=d[p]){if(Ecode!=""){var o=(urlDate==d[p]&&Ecode==cmbMovie.getCurrent().value)?"chosen":"blocks";}else{var o=(urlDate==d[p]&&Cinema_id==cmbMovie.getCurrent().value)?"chosen":"blocks";}v=v.replace("{class}",o);}}jq("#date_list").html(v);if(!n){jq("#date_list .item:first").addClass("active");}jq("#date_list >div>div a").on("click",function(){if(jq(this).data("date")!=urlDate){cmbMovieDate.getCurrent().value=jq(this).data("date");fnBusy(true);fnShowTime();}});}catch(s){fnErr({fnName:"fnLoadDate",err:s});}}function parseISO8601(c){var b=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,a=new Date(NaN),e,d=b.exec(c);if(d){e=+d[2];a.setFullYear(d[1],e-1,d[3]);if(e!=a.getMonth()+1){a.setTime(NaN);}}return a;}function fnGFDate(d){try{var a={0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"};var c=d.slice(0,4)+"-"+d.slice(4,6)+"-"+d.slice(6,8);return a[parseISO8601(c).getDay()];}catch(b){fnErr({fnName:"fnGFDate",Err:b});}}function fnShowFilters(){try{var a=jq(".moreless").data().type;switch(a.toUpperCase()){case"MORE":jq(".moreless").data().type="less";jq(".moreless").removeClass("plusnew").addClass("minusnew");jq("#id_fltr >a").html("Hide Filters");if(typeof(fnPush_to_Kis_Wiz)!=="undefined"){fnPush_to_Kis_Wiz("Click on Filter of Showtimes","");}break;case"LESS":jq(".moreless").data().type="more";jq(".moreless").removeClass("minusnew").addClass("plusnew");jq("#id_fltr >a").html("Filter by Showtimes or Price");break;}jq("#dFlTym, #dFlPr").slideToggle("fast");}catch(b){fnErr({fnName:"fnShowFilters",err:b});}}function fnSelSh(g,k,j,p,m){try{fnPush_to_wiz(k,p);if(typeof(ga)!=="undefined"){ga("send","pageview",{dimension3:k});}jq("#FLDonation").attr("checked",false);isDonation=false;jq("#rEticketHO").attr("checked",false);jq("#rEticketBO").attr("checked",false);var o=new clsCookie();if((o.get({name:"lngTransId",defVal:""})!=""&&o.get({name:"lngTransId",defVal:""})!="0")||(o.get({name:"BOOKINGID",defVal:""})!="")){fnGlobalErr({eCode:"unFinTrans"});return;}for(var f=0;f<aVN.length;f++){if(aVN[f][0]==k){if(fnGQS("cid","")!=""){glBT.VenAppType=aVN[f][6];}else{glBT.VenAppType=aVN[f][11];}}}fnBusy(true);glBT.SVC=k;glBT.SSID=j;glBT.SEC=p;glBT.SST=m;var a="";var c=0;var d=o.get({name:"userCine",key:"mrs",defVal:""}).split(";");if(jq.inArray(glBT.SVC,d)==-1){var b=(d.length>3)?1:0;for(var f=b;f<d.length;f++){if(d[f]!=""){a+=d[f]+";";}}a+=glBT.SVC+";";o.set({name:"userCine",key:"mrs",value:a,sess:false});}var n="";var h="";glBT.dispDate=jq(".item a.chosen").data("disp_date");var l=glBT.dispDate;if(typeof(aiEV)!=="undefined"){for(var f=0;f<aiEV.length;f++){if(aiEV[f][1]==p){n=aiEV[f][4];break;}}}for(var f=0;f<aVN.length;f++){if(aVN[f][0]==k){h=aVN[f][1];break;}}jq("#SLEName_New").html(n);jq("#ShowTym_New").html(l+", "+m);jq("#VenAdd_New").html(h);jq("#EName, #EName_MC").html(n);jq("#EDtl").children().eq(0).html(l+", "+m);jq("#EDtl_MC").children().eq(0).html(l+", "+m);jq("#EDtl").children().eq(1).html(h);jq("#EDtl_MC").children().eq(1).html(h);jq("#SLEName").html(n);jq("#SLEDtl").children().eq(0).html(l+", "+m);jq("#SLEDtl").children().eq(1).html(h);if(typeof(fnPush_to_Kis_Wiz)!=="undefined"){fnPush_to_Kis_Wiz("Selected showtime","Buytickets page on clicking showtime");}fnAjax({dataType:"script",success:function(e){fnCallout(e);},type:"GET",url:"/getJSData/?file="+global.dumpPath+"GetShowInfo_"+glBT.SVC+"_"+glBT.SSID+".js&cmd=GETSHOWINFOWEB&vc="+glBT.SVC+"&sc="+glBT.SSID+"&_="+fnTS()});}catch(g){fnErr({fnName:"fnSelSh",fnParams:g+", "+k+", "+j+", "+p+", "+m,err:g});}}function fnFilter_unavail_shows(){try{if(jq("#toggle_unavail_shows").is(":checked")){jq(".shtime[data-online='N']").hide();jq(".listing").each(function(){if(jq(this).find(".shtime[data-online='Y']").length==0){jq(this).hide();}});}else{jq(".shtime[data-online='N']").show();jq(".listing").show();}}catch(a){fnErr({fnName:"fnFilter_ofline_shows",err:a});}}var ObjCatagories={};var ObjGroupSeats={};var ObjLayout=[];var arrColorCodes=["#f0f6dc","#fce9e2","#fbf8cf","#D0E8F9","#dcfcf2"];var ObjColor={};var ObjCheckList={TotalSeats:0,SelectedSeats:[],strSSeats:"",CatagoryToSelect:"",OtherCatSeat:"",AllowMultiCatSel:false,ShowInvertedLayout:false,AllowSingleClick:false,SeatLayoutHere:true};var intMaxRowLength=0;var intAvailSeats=0;function fnRSet(){try{intAvailSeats=0;ObjCatagories={};ObjGroupSeats={};ObjLayout=[];ObjColor={};ObjCheckList={TotalSeats:0,SelectedSeats:[],strSSeats:"",CatagoryToSelect:"",OtherCatSeat:"",AllowMultiCatSel:false,ShowInvertedLayout:false,AllowSingleClick:false,SeatLayoutHere:true};jq("#SLcmbQty").val("");jq("#QtyToolTip, #sdCover, #ShwMorSeats").show();jq("#MulCatErr").removeClass("bounce1");jq("#SLHere").removeClass("bounce2");jq("#SLHere").hide();jq("#STotal").html("Rs.0");jq(".qytVal").text("Qty");}catch(a){fnErr({fnName:"fnRSet",err:a});}}function fnMakeObj(h){try{fnRSet();var y=h.split("||");var B=y[0];var z=B.split("|");for(var r=0;r<z.length;r++){var f=z[r].split(":");ObjCatagories[f[1]]={};ObjCatagories[f[1]]["AreaName"]=f[0];ObjCatagories[f[1]]["AreaCode"]=f[2];ObjCatagories[f[1]]["AreaID"]=f[3];ObjCatagories[f[1]]["AreaQty"]=parseInt(f[5],10);ObjCatagories[f[1]]["CoupleSeats"]=(f.length>7)?"Y":"N";ObjColor[f[1]]=arrColorCodes[r];if(f.length>7){fnGroupObj(f);}}var g=y[1];var u=g.split("|");if(ObjCheckList.ShowInvertedLayout){u=u.reverse();}var a={flag:false,SeatQty:0,left:0};intMaxRowLength=0;for(var r=0;r<u.length;r++){if(u[r]!=""){var s=u[r].split(":");if(intMaxRowLength<s.length){intMaxRowLength=s.length;}var v=s[0];var q=s[1];var x={};x.rowname=q;x.rowcode=v;x.catagories=[];x.seats=[];for(var p=2;p<s.length;p++){var n=s[p];var o=n.substr(0,1);var l=((n.substr(1,1)=="1"||n.substr(1,1)=="3")&&(jq.inArray(glBT.VenAppType,["VT","VS"])!=-1))?"1":n.substr(1,1);var c=n.substr(2,n.length-1);var k=(l=="1")?"Y":"N";if(k=="Y"){intAvailSeats++;}if(jq.inArray(o,x.catagories)==-1){x.catagories.push(o);}var A={};A.catcode=o;A.seattype=l;A.seatno=c;A.isavail=k;if(ObjGroupSeats[o]!=undefined){if(ObjGroupSeats[o][v]!=undefined){var d=ObjGroupSeats[o][v];var b=false;for(var m=0;m<d.length;m++){if(c==fnGnSeatNo(d[m]["StartSeat"],"ADD")){A.HwManySeater=(l=="0")?0:parseInt(d[m]["Plus"],10)+1;b=true;a.flag=true;a.SeatQty=parseInt(d[m]["Plus"],10)+1;a.left=parseInt(d[m]["Plus"],10);}}if(!b){if(a.flag){A.HwManySeater=(l=="0")?0:a.SeatQty;a.left=a.left-1;a.flag=(a.left==0)?false:true;}else{A.HwManySeater=(l=="0")?0:1;}}}else{A.HwManySeater=(l=="0")?0:1;}}else{A.HwManySeater=(l=="0")?0:1;}x.seats.push(A);}ObjLayout.push(x);}}if(intAvailSeats==0){fnBusy(false);fnDoFloat("#NoSeats");fnCover(true);jq("#NoSeats").show();}else{fnMakeSL();}}catch(w){fnErr({fnName:"fnMakeObj",fnParams:h,err:w});}}function fnGroupObj(b){try{var f=b[1];ObjGroupSeats[f]={};for(var c=6;c<b.length;c++){var j=b[c].split("~");var a=j[0].split(",")[0];var d=j[0].split(",")[1];if(ObjGroupSeats[f][a]==undefined){ObjGroupSeats[f][a]=[];}var h={};h.StartSeat=d;h.Plus=j.length-1;ObjGroupSeats[f][a].push(h);}}catch(g){fnErr({fnName:"fnGroupObj",fnParams:b,err:g});}}function fnGnSeatNo(c,a){try{switch(a){case"SUB":if(parseInt(c.substr(0,1),10)==0){return c.substr(1,1);}else{return c;}break;case"ADD":if(c.toString().length==1){c="0"+c.toString();return c;}else{return c;}break;}}catch(b){fnErr({fnName:"fnGnSeatNo",fnParams:c+", "+a,err:b});}}function fnMakeSL(){try{var E="";var A=[];E+='<table cellspacing="0" cellpadding="0" style="width:100%px;" class="setmain">';for(var q=0;q<ObjLayout.length;q++){var m=ObjLayout[q]["rowname"];var r=ObjLayout[q];var p=1;if(A.length==0){var f="";var l="";for(var D=0;D<r.catagories.length;D++){A.push(r.catagories[D]);if(ObjTT[ObjCatagories[r.catagories[D]]["AreaCode"]]!=undefined){f+=(D==0)?ObjTT[ObjCatagories[r.catagories[D]]["AreaCode"]]["CatagoryName"]:" & "+ObjTT[ObjCatagories[r.catagories[D]]["AreaCode"]]["CatagoryName"];}else{f+=(D==0)?ObjCatagories[r.catagories[D]]["AreaName"]:" & "+ObjCatagories[r.catagories[D]]["AreaName"];}l=ObjCatagories[r.catagories[D]]["AreaCode"];}E+="<tr>";E+='<td class="seatR">&nbsp;</td>';E+='<td class="PriceB1" style="background:'+ObjColor[A[0]]+';">';E+=(A.length==1)?'<div class="seatP" style="background:'+ObjColor[A[0]]+';">':'<div class="seatP" style="background:#ffffff;">';E+='<div class="fleft">'+f+"</div>";E+="</div>";E+='<div id="Clear_'+l+'" class="canset" style="margin: 12px 12px 0 0; display:none;"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/1_4.png?v1" style="margin-bottom:-4px;" /><a href="javascript:;" onclick="fnClearSel(\''+l+'\');" style="text-decoration:underline;">&nbsp;Clear Selaction</a></div>';E+='<div id="MultiErr_'+l+'" class="canset" style="margin: 12px 12px 0 0; display:none;"><span> X </span> &nbsp; You can\'t select multiple sets categories </div>';E+="</td>";E+="</tr>";p++;}else{var n=false;var f="";var l="";for(var D=0;D<r.catagories.length;D++){if(jq.inArray(r.catagories[D],A)==-1){n=true;break;}}if(n){A=[];for(var D=0;D<r.catagories.length;D++){A.push(r.catagories[D]);if(ObjTT[ObjCatagories[r.catagories[D]]["AreaCode"]]!=undefined){f+=(D==0)?ObjTT[ObjCatagories[r.catagories[D]]["AreaCode"]]["CatagoryName"]:" & "+ObjTT[ObjCatagories[r.catagories[D]]["AreaCode"]]["CatagoryName"];}else{f+=(D==0)?ObjCatagories[r.catagories[D]]["AreaName"]:" & "+ObjCatagories[r.catagories[D]]["AreaName"];}l=ObjCatagories[r.catagories[D]]["AreaCode"];}E+="<tr>";E+='<td colspan="2">&nbsp;</td>';E+="</tr>";E+="<tr>";E+='<td class="seatR">&nbsp;</td>';E+='<td class="PriceB1" style="background:'+ObjColor[A[0]]+';">';E+=(A.length==1)?'<div class="seatP" style="background:'+ObjColor[A[0]]+';">':'<div class="seatP" style="background:#ffffff;">';E+='<div class="fleft">'+f+"</div>";E+="</div>";E+='<div id="Clear_'+l+'" class="canset" style="margin: 12px 12px 0 0; display:none;"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/1_4.gif?v1" style="margin-bottom:-4px;" /><a href="javascript:;" onclick="fnClearSel(\''+l+'\');" style="text-decoration:underline;">&nbsp;Clear Selaction</a></div>';E+='<div id="MultiErr_'+l+'" class="canset" style="margin: 12px 12px 0 0; display:none;"><span> X </span> &nbsp; You can\'t select multiple sets categories </div>';E+="</td>";E+="</tr>";p++;}}E+="<tr>";E+='<td><div class="seatR Setrow1">'+m+"</div></td>";E+='<td class="SRow1" style="background:'+ObjColor[r.seats[0]["catcode"]]+'">';var u=r.seats;for(var y=0;y<u.length;y++){if(u[y]["seattype"]=="0"){E+='<div class="seatI" style="background:'+ObjColor[u[y]["catcode"]]+'"></div>';}else{if(ObjGroupSeats[u[y]["catcode"]]!=undefined){if(ObjGroupSeats[u[y]["catcode"]][r.rowcode]!=undefined){var h=ObjGroupSeats[u[y]["catcode"]][r.rowcode];var g=false;for(var x=0;x<h.length;x++){if(fnGnSeatNo(u[y]["seatno"],"SUB")==h[x]["StartSeat"]){var c=parseInt(h[x]["Plus"],10)+1;var o=u[y]["seattype"];var z=u[y]["seatno"];var w=[];for(var C=y+1;C<=(y+(c-1));C++){w.push(u[C]["seatno"]);}var s=u[y]["catcode"]+"_"+r.rowcode+"_"+z;var b=u[y]["catcode"]+"_"+r.rowcode+"_"+z;for(var v=0;v<w.length;v++){s+="_"+u[y]["catcode"]+"_"+r.rowcode+"_"+w[v];b+="|"+u[y]["catcode"]+"_"+r.rowcode+"_"+w[v];}E+='<div id="'+s+'" class="seatI" style="background:'+ObjColor[u[y]["catcode"]]+"; width:"+16*c+"px; padding:0 "+2*c+'px;"><a href="javascript:;" onclick="fnSelectSeat(\''+b+'\');"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/'+c+"_"+o+'.png?v1" /></a></div>';y=y+parseInt(h[x]["Plus"],10);g=true;}}if(!g){if(u[y]["seattype"]=="1"){E+='<div id="'+u[y]["catcode"]+"_"+r.rowcode+"_"+u[y]["seatno"]+'" class="seatI" style="background:'+ObjColor[u[y]["catcode"]]+'"><a href="javascript:;" onclick="fnSelectSeat(\''+u[y]["catcode"]+"_"+r.rowcode+"_"+u[y]["seatno"]+'\')"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/1_'+u[y]["seattype"]+'.png?v1" /></a></div>';}else{E+='<div class="seatI" style="background:'+ObjColor[u[y]["catcode"]]+'"><a href="javascript:;"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/1_'+u[y]["seattype"]+'.png?v1" /></a></div>';}}}else{if(u[y]["seattype"]=="1"){E+='<div id="'+u[y]["catcode"]+"_"+r.rowcode+"_"+u[y]["seatno"]+'" class="seatI" style="background:'+ObjColor[u[y]["catcode"]]+'"><a href="javascript:;" onclick="fnSelectSeat(\''+u[y]["catcode"]+"_"+r.rowcode+"_"+u[y]["seatno"]+'\')"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/1_'+u[y]["seattype"]+'.png?v1" /></a></div>';}else{E+='<div class="seatI" style="background:'+ObjColor[u[y]["catcode"]]+'"><a href="javascript:;"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/1_'+u[y]["seattype"]+'.png?v1" /></a></div>';}}}else{if(u[y]["seattype"]=="1"){E+='<div id="'+u[y]["catcode"]+"_"+r.rowcode+"_"+u[y]["seatno"]+'" class="seatI" style="background:'+ObjColor[u[y]["catcode"]]+'"><a href="javascript:;" onclick="fnSelectSeat(\''+u[y]["catcode"]+"_"+r.rowcode+"_"+u[y]["seatno"]+'\')"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/1_'+u[y]["seattype"]+'.png?v1" /></a></div>';}else{E+='<div class="seatI" style="background:'+ObjColor[u[y]["catcode"]]+'"><a href="javascript:;"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/1_'+u[y]["seattype"]+'.png?v1" /></a></div>';}}}if(u[y]["seattype"]=="4"){ObjCheckList.SelectedSeats.push(b);ObjCheckList.TotalSeats=parseInt(ObjCheckList.TotalSeats,10)-c;fnMakeSSString();}}E+="</tr>";}E+="</table>";jq("#layout").css({width:intMaxRowLength*20+50+"px"});jq("#layout").html(E);jq("#ShwMorSeats").children().css({opacity:"1"});jq("#MulCatErr").hide();jq("#QtyToolTip").removeClass("bounce");fnBusy(false);fnCover(true);fnDoFloat("#tblClassNew");jq(".actseata").scrollTop(0);jq("#tblClassNew").show();jq("#QtyToolTip").addClass("bounce");if(jq("#layout > table").height()>320){jq("#ShwMorSeats").show();}else{jq("#ShwMorSeats").hide();}}catch(B){fnErr({fnName:"fnMakeSL",err:B});}}function fnSelectSeat(m){try{if(ObjCheckList.TotalSeats==0){fnClearSelection();}var l=m.split("|");var a=l[0].split("_")[0];if(!ObjCheckList.AllowMultiCatSel){if(ObjCheckList.SelectedSeats.length==0){ObjCheckList.CatagoryToSelect=a;}else{if(ObjCheckList.CatagoryToSelect!=a){jq("#SLError").hide();jq("#MulCatErr").addClass("bounce1");jq("#MulCatErr").show();ObjCheckList.OtherCatSeat=m;return;}}}if(l.length>ObjCheckList.TotalSeats){return;}var o=fnGetRowNSeatData(l[0]);var k=fnGetNextSeats(o);var g=k.rowcode;var b=k.seats;if(ObjTT[ObjCatagories[a]["AreaCode"]]!=undefined){if(ObjTT[ObjCatagories[a]["AreaCode"]]["Rules"]!="0"){var k=fnApplyRules(ObjTT[ObjCatagories[a]["AreaCode"]]["Rules"],g,b);if(!k.blnPass){fnSLErrors("SLError",k.errMsg,"e");if(ObjCheckList.SelectedSeats.length==0){jq(".canset").hide();}return;}}}for(var f=0;f<b.length;){var n="";var c="";for(var d=0;d<b[f]["HwManySeater"];d++){n+=(d==0)?b[f]["catcode"]+"_"+g+"_"+b[(f+d)]["seatno"]:"_"+b[f]["catcode"]+"_"+g+"_"+b[(f+d)]["seatno"];c+=(d==0)?b[f]["catcode"]+"_"+g+"_"+b[(f+d)]["seatno"]:"|"+b[f]["catcode"]+"_"+g+"_"+b[(f+d)]["seatno"];}fnUpdateObj(c,"N");n=n.replace(/[.]/g,"\\.");jq("#"+n).html('<img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/'+b[f]["HwManySeater"]+'_4.png?v1" />');ObjCheckList.SelectedSeats.push(c);ObjCheckList.TotalSeats=parseInt(ObjCheckList.TotalSeats,10)-parseInt(b[f]["HwManySeater"],10);f=f+parseInt(b[f]["HwManySeater"],10);}fnMakeSSString();fnUTotal();jq("#MulCatErr").hide();jq("#MulCatErr").removeClass("bounce1");jq("#SLHere").hide();}catch(h){fnErr({fnName:"fnSelectSeat",fnParams:m,err:h});}}function fnUTotal(){try{var a=ObjCheckList.SelectedSeats.length;var b=ObjTT[ObjCatagories[ObjCheckList.CatagoryToSelect]["AreaCode"]]["Price"];jq("#STotal").html("Rs."+(a*b).toFixed(2));}catch(c){fnErr({fnName:"fnUTotal",err:c});}}function fnMakeSSString(){try{if(ObjCheckList.TotalSeats==0){var g="";var d=0;for(var l=0;l<ObjCheckList.SelectedSeats.length;l++){var c=ObjCheckList.SelectedSeats[l].split("|");for(var h=0;h<c.length;h++){var b=c[h].split("_")[0];var m=ObjCatagories[b]["AreaCode"];var o=ObjCatagories[b]["AreaID"];var a=c[h].split("_")[1];var f=c[h].split("_")[2];g+=m+"|"+o+"|"+a+"|"+f+"|";d++;}}glBT.TQ=d;var k="|"+d+"|"+g;ObjCheckList.strSSeats=k;}else{ObjCheckList.strSSeats="";}}catch(n){fnErr({fnName:"fnMakeSSString",err:n});}}function fnClearSel(){try{jq("#MulCatErr").hide();jq("#MulCatErr").removeClass("bounce1");fnClearSelection();fnSelectSeat(ObjCheckList.OtherCatSeat);ObjCheckList.OtherCatSeat="";}catch(a){fnErr({fnName:"fnClearSel",err:a});}}function fnClearSelection(){try{for(var d=0;d<ObjCheckList.SelectedSeats.length;d++){var f=ObjCheckList.SelectedSeats[d].split("|");var b="";var a="";for(var c=0;c<f.length;c++){b+=(c==0)?f[c]:"_"+f[c];a+=(c==0)?f[c]:"|"+f[c];}fnUpdateObj(ObjCheckList.SelectedSeats[d],"Y");ObjCheckList.TotalSeats=ObjCheckList.TotalSeats+f.length;b=b.replace(/[.]/g,"\\.");jq("#"+b).html("<a onclick=\"fnSelectSeat('"+a+'\');" href="javascript:;"><img src="http://cnt.in.bookmyshow.com/bmsin/SLIMG/'+f.length+'_1.png?v1"></a>');}jq("#STotal").html("Rs.0");ObjCheckList.SelectedSeats=[];}catch(g){fnErr({fnName:"fnClearSelection",err:g});}}function fnUpdateObj(g,h){try{var b=g.split("|");var a=b[0].split("_")[0];var l=b[0].split("_")[1];for(var d=0;d<b.length;d++){for(var k=0;k<ObjLayout.length;k++){if(ObjLayout[k]["rowcode"]==l&&jq.inArray(a,ObjLayout[k]["catagories"])!=-1){var m=ObjLayout[k]["seats"];break;}}if(m!=undefined&&m.length!=0){for(var c=0;c<m.length;c++){if(m[c]["seatno"]==b[d].split("_")[2]){m[c]["isavail"]=h;m[c]["seattype"]=(h=="N")?"4":"1";}}}}}catch(f){fnErr({fnName:"fnUpdateObj",fnParams:g+","+h,err:f});}}function fnGetRowNSeatData(j){try{var k=j.split("_");var a=k[0];var g=k[1];var d=k[2];var b={};for(var f=0;f<ObjLayout.length;f++){if(ObjLayout[f]["rowcode"]==g&&jq.inArray(a,ObjLayout[f]["catagories"])!=-1){b.SeatsDataObj=ObjLayout[f]["seats"];b.RowIndex=f;break;}}var c=0;for(var f=0;f<b.SeatsDataObj.length;f++){if(b.SeatsDataObj[f]["seatno"]==d){b.SeatIndex=f;b.catcode=b.SeatsDataObj[f]["catcode"];b.SeatHwManySeater=b.SeatsDataObj[f]["HwManySeater"];break;}}return b;}catch(h){fnErr({fnName:"fnGetRowNSeatData",fnParams:j,err:h});}}function fnGetNextSeats(c){try{var d=c.SeatIndex;var g=c.RowIndex;var j=c.SeatHwManySeater;var h=c.catcode;var b=c.SeatsDataObj;var l={};l.rowcode=ObjLayout[g]["rowcode"];l.seats=[];var a=ObjCheckList.TotalSeats;if(ObjCheckList.AllowSingleClick){var m=d+parseInt(j,10);}else{var m=b.length;}for(var f=d;f<m;f++){if(b[f]!=undefined){if(b[f]["catcode"]==h&&b[f]["isavail"]=="Y"&&b[f]["HwManySeater"]==j&&a!=0){l.seats.push(b[f]);a--;}else{break;}}else{break;}}return l;}catch(k){fnErr({fnName:"fnGetNextSeats",fnParams:c,err:k});}}function fnApplyRules(s,o,n){try{var d=parseInt(s);var g={};for(var j=5;j>=0;j--){var h=Math.pow(2,j);if(d>=h){d=d-h;g[h]=true;}}var l=n[0]["catcode"];var p=n[0]["seatno"];var r=fnGetRowNSeatData(l+"_"+o+"_"+p);var q=r.RowIndex;var k=r.SeatIndex;var c=n[n.length-1]["seatno"];var f=fnGetRowNSeatData(l+"_"+o+"_"+c);var b=f.SeatIndex;var a={};a.blnPass=true;a.errMsg="";if(g[1]!=undefined&&g[1]){if((ObjLayout[q]["seats"][k-1]!=undefined&&ObjLayout[q]["seats"][k-1]["seattype"]=="1")&&(ObjLayout[q]["seats"][k-2]!=undefined&&ObjLayout[q]["seats"][k-2]["seattype"]=="2")){a.blnPass=false;a.errMsg="A single seat cannot be left between your current selection and a sold seat";}else{if((ObjLayout[q]["seats"][b+1]!=undefined&&ObjLayout[q]["seats"][b+1]["seattype"]=="1")&&(ObjLayout[q]["seats"][b+2]!=undefined&&ObjLayout[q]["seats"][b+2]["seattype"]=="2")){a.blnPass=false;a.errMsg="A single seat cannot be left between your current selection and a sold seat";}}}if(g[2]!=undefined&&g[2]){if((ObjLayout[q]["seats"][k-1]!=undefined&&ObjLayout[q]["seats"][k-1]["seattype"]=="1")&&(ObjLayout[q]["seats"][k-2]!=undefined&&ObjLayout[q]["seats"][k-2]["seattype"]=="4")){a.blnPass=false;a.errMsg="A single seat cannot be left between your previous and current selection";}else{if((ObjLayout[q]["seats"][b+1]!=undefined&&ObjLayout[q]["seats"][b+1]["seattype"]=="1")&&(ObjLayout[q]["seats"][b+2]!=undefined&&ObjLayout[q]["seats"][b+2]["seattype"]=="4")){a.blnPass=false;a.errMsg="A single seat cannot be left between your previous and current selection";}}}if(g[4]!=undefined&&g[4]){if((ObjLayout[q]["seats"][k-1]!=undefined&&ObjLayout[q]["seats"][k-1]["seattype"]=="1")&&((ObjLayout[q]["seats"][k-2]!=undefined&&ObjLayout[q]["seats"][k-2]["seattype"]=="0")||ObjLayout[q]["seats"][k-2]==undefined)){a.blnPass=false;a.errMsg="A single seat cannot be left between your current selection and the gangway";}else{if((ObjLayout[q]["seats"][b+1]!=undefined&&ObjLayout[q]["seats"][b+1]["seattype"]=="1")&&((ObjLayout[q]["seats"][b+2]!=undefined&&ObjLayout[q]["seats"][b+2]["seattype"]=="0")||ObjLayout[q]["seats"][b+2]==undefined)){a.blnPass=false;a.errMsg="A single seat cannot be left between your current selection and the gangway";}}}return a;}catch(m){fnErr({fnName:"fnApplyRules",fnParams:s+","+o+","+n,err:m});}}function fnClCallout(){try{fnGATracker({location:"Cl1SeatSel",action:"Close"});fnCover(false);jq("#tblClassNew").hide();jq("body").removeClass("noscroll");}catch(a){fnErr({fnName:"fnClCallout",err:a});}}function fnSQty(){try{fnGATracker({location:"Cl1catqty",action:"SelQty"});jq("#SLError").hide();jq("#QtyToolTip").removeClass("bounce");jq("#SLHere").addClass("bounce2");jq("#SLHere").show();jq("#STotal").html("Rs.0");var a=jq("#SLcmbQty").val();if(a!=""){jq("#sdCover").hide();jq("#QtyToolTip").hide();if(typeof(fnPush_to_Kis_Wiz)!=="undefined"){fnPush_to_Kis_Wiz("Selected quantity","Quantity + Seat layout from Buytickets");}}else{jq("#SLHere").hide();jq("#SLHere").removeClass("bounce2");jq("#MulCatErr").hide();jq("#sdCover").show();jq("#QtyToolTip").show();}fnClearSelection();jq(".canset").hide();ObjCheckList.TotalSeats=(a=="")?0:parseInt(a,10);}catch(b){fnErr({fnName:"fnSQty",err:b});}}function fnPreInit(){try{fnGATracker({location:"Cl2SeatSel",action:"Proceed"});if(ObjCheckList.SelectedSeats.length!=0){if(ObjCheckList.TotalSeats!=0){fnSLErrors("SLError","Please select exactly "+jq("#SLcmbQty").val()+" seats.","e");}else{jq("#tblClassNew").hide();fnBusy(true);jq("body").removeClass("noscroll");fnInitTransSL();if(typeof(fnPush_to_Kis_Wiz)!=="undefined"){fnPush_to_Kis_Wiz("Selected seat","Callout from Buytickets with Quantity + Seat option");}}}else{if(jq("#SLcmbQty").val()==""){fnSLErrors("SLError","Please select quantity","e");}else{fnSLErrors("SLError","Please select exactly "+jq("#SLcmbQty").val()+" seats.","e");}}}catch(a){fnErr({fnName:"fnPreInit",err:a});}}function fnInitTransSL(){try{glBT.SL="Y";fnDoTrans({AppC:global.AppC,venCode:glBT.SVC,transId:0,cmd:"INITTRANS",fnCC:fnSLAddSeats,fnEC:fneSc});}catch(a){fnErr({fnName:"fnInitTransSL",err:a});}}function fnSLAddSeats(f){try{var c=new clsCookie();lngTransId=fnGVal({key:"TRANSACTIONID",data:f});c.set({name:"lngTransId",value:lngTransId});var b=jq("#SLcmbQty").val();var a=ObjTT[ObjCatagories[ObjCheckList.CatagoryToSelect]["AreaCode"]]["TT"];fnDoTrans({AppC:global.AppC,venCode:glBT.SVC,transId:lngTransId,cmd:"ADDSEATS",p1:glBT.SSID,p2:a,p3:b,p4:c.get({name:"strRef",defVal:""}),fnCC:fnSSelectedSeats,fnEC:fneSc});}catch(d){fnErr({fnName:"fnSLAddSeats",fnParams:f,err:d});}}function fnSSelectedSeats(c){try{var a=new clsCookie();var d=fnGVal({key:"BOOKINGID",data:c});a.set({name:"BOOKINGID",value:d});fnDoTrans({AppC:global.AppC,venCode:glBT.SVC,transId:lngTransId,cmd:"SETSELECTEDSEATS",p1:glBT.SSID,p2:ObjCheckList.strSSeats,fnCC:fnuSI,fnEC:fnCanTr});}catch(b){fnErr({fnName:"fnSSelectedSeats",fnParams:c,err:b});}}function fnSLErrors(d,c,a){try{jq("#QtyToolTip, #SLHere, #MulCatErr").hide();fnCMsgDis(d,c,a);}catch(b){fnErr({fnName:"fnSLErrors",fnParams:d+","+c+","+a,err:b});}}var Hashtable=function(){function F(a){var f;if(typeof a=="string"){return a;}if(typeof a.hashCode==H){return f=a.hashCode(),typeof f=="string"?f:F(f);}if(typeof a.toString==H){return a.toString();}try{return String(a);}catch(c){return Object.prototype.toString.call(a);}}function E(d,c){return d.equals(c);}function D(a,d){return typeof d.equals==H?d.equals(a):a===d;}function C(b){return function(a){if(a===null){throw new Error("null is not a valid "+b);}if(typeof a=="undefined"){throw new Error(b+" must not be undefined");}};}function z(f,e,h,g){this[0]=f,this.entries=[],this.addEntry(e,h),g!==null&&(this.getEqualityFunction=function(){return g;});}function v(b){return function(a){var h=this.entries.length,g,f=this.getEqualityFunction(a);while(h--){g=this.entries[h];if(f(a,g[0])){switch(b){case y:return !0;case x:return g;case w:return[h,g[1]];}}}return !1;};}function u(b){return function(a){var h=a.length;for(var g=0,f=this.entries.length;g<f;++g){a[h+g]=this.entries[g][b];}};}function t(f,e){var h=f.length,g;while(h--){g=f[h];if(e===g[0]){return h;}}return null;}function s(e,d){var f=e[d];return f&&f instanceof z?f:null;}function r(o,i){var h=this,g=[],c={},b=typeof o==H?o:F,a=typeof i==H?i:null;this.put=function(k,j){B(k),A(j);var q=b(k),n,m,l=null;return n=s(c,q),n?(m=n.getEntryForKey(k),m?(l=m[1],m[1]=j):n.addEntry(k,j)):(n=new z(q,k,j,a),g[g.length]=n,c[q]=n),l;},this.get=function(f){B(f);var e=b(f),k=s(c,e);if(k){var j=k.getEntryForKey(f);if(j){return j[1];}}return null;},this.containsKey=function(e){B(e);var d=b(e),f=s(c,d);return f?f.containsKey(e):!1;},this.containsValue=function(e){A(e);var d=g.length;while(d--){if(g[d].containsValue(e)){return !0;}}return !1;},this.clear=function(){g.length=0,c={};},this.isEmpty=function(){return !g.length;};var p=function(d){return function(){var e=[],f=g.length;while(f--){g[f][d](e);}return e;};};this.keys=p("keys"),this.values=p("values"),this.entries=p("getEntries"),this.remove=function(j){B(j);var n=b(j),m,l=null,k=s(c,n);return k&&(l=k.removeEntryForKey(j),l!==null&&(k.entries.length||(m=t(g,n),G(g,m),delete c[n]))),l;},this.size=function(){var e=0,d=g.length;while(d--){e+=g[d].entries.length;}return e;},this.each=function(f){var e=h.entries(),k=e.length,j;while(k--){j=e[k],f(j[0],j[1]);}},this.putAll=function(L,K){var J=L.entries(),I,q,n,m,l=J.length,f=typeof K==H;while(l--){I=J[l],q=I[0],n=I[1],f&&(m=h.get(q))&&(n=K(q,m,n)),h.put(q,n);}},this.clone=function(){var d=new r(o,i);return d.putAll(h),d;};}var H="function",G=typeof Array.prototype.splice==H?function(d,c){d.splice(c,1);}:function(g,f){var j,i,h;if(f===g.length-1){g.length=f;}else{j=g.slice(f+1),g.length=f;for(i=0,h=j.length;i<h;++i){g[f+i]=j[i];}}},B=C("key"),A=C("value"),y=0,x=1,w=2;return z.prototype={getEqualityFunction:function(a){return typeof a.equals==H?E:D;},getEntryForKey:v(x),getEntryAndIndexForKey:v(w),removeEntryForKey:function(b){var d=this.getEntryAndIndexForKey(b);return d?(G(this.entries,d[0]),d[1]):null;},addEntry:function(d,c){this.entries[this.entries.length]=[d,c];},keys:u(0),values:u(1),getEntries:function(f){var e=f.length;for(var h=0,g=this.entries.length;h<g;++h){f[e+h]=this.entries[h].slice(0);}},containsKey:v(y),containsValue:function(d){var c=this.entries.length;while(c--){if(d===this.entries[c][1]){return !0;}}return !1;}},r;}();(function(v){function n(e,d,f){this.dec=e,this.group=d,this.neg=f;}function m(){for(var b=0;b<o.length;b++){localeGroup=o[b];for(var d=0;d<localeGroup.length;d++){u.put(localeGroup[d],b);}}}function l(b,y){u.size()==0&&m();var x=".",w=",",j="-";y==0&&(b.indexOf("_")!=-1?b=b.split("_")[1].toLowerCase():b.indexOf("-")!=-1&&(b=b.split("-")[1].toLowerCase()));var i=u.get(b);if(i){var g=p[i];g&&(x=g[0],w=g[1]);}return new n(x,w,j);}var u=new Hashtable,t=["ae","au","ca","cn","eg","gb","hk","il","in","jp","sk","th","tw","us"],s=["at","br","de","dk","es","gr","it","nl","pt","tr","vn"],r=["cz","fi","fr","ru","se","pl"],q=["ch"],p=[[".",","],[",","."],[","," "],[".","'"]],o=[t,s,r,q];v.fn.formatNumber=function(a,f,e){return this.each(function(){f==null&&(f=!0),e==null&&(e=!0);var c;v(this).is(":input")?c=new String(v(this).val()):c=new String(v(this).text());var b=v.formatNumber(c,a);f&&(v(this).is(":input")?v(this).val(b):v(this).text(b));if(e){return b;}});},v.formatNumber=function(F,E){var E=v.extend({},v.fn.formatNumber.defaults,E),D=l(E.locale.toLowerCase(),E.isFullLocale),C=D.dec,B=D.group,A=D.neg,z="0#-,.",y="",x=!1;for(var w=0;w<E.format.length;w++){if(z.indexOf(E.format.charAt(w))!=-1){if(w==0&&E.format.charAt(w)=="-"){x=!0;continue;}break;}y+=E.format.charAt(w);}var k="";for(var w=E.format.length-1;w>=0;w--){if(z.indexOf(E.format.charAt(w))!=-1){break;}k=E.format.charAt(w)+k;}E.format=E.format.substring(y.length),E.format=E.format.substring(0,E.format.length-k.length);var a=new Number(F);return v._formatNumber(a,E,k,y,x);},v._formatNumber=function(ad,ac,ab,aa,Z){var ac=v.extend({},v.fn.formatNumber.defaults,ac),Y=l(ac.locale.toLowerCase(),ac.isFullLocale),X=Y.dec,W=Y.group,V=Y.neg,U=!1;if(isNaN(ad)){if(ac.nanForceZero!=1){return null;}ad=0,U=!0;}ab=="%"&&(ad*=100);var T="";if(ac.format.indexOf(".")>-1){var S=X,R=ac.format.substring(ac.format.lastIndexOf(".")+1);if(ac.round==1){ad=new Number(ad.toFixed(R.length));}else{var Q=ad.toString();Q=Q.substring(0,Q.lastIndexOf(".")+R.length+1),ad=new Number(Q);}var O=ad%1,M=new String(O.toFixed(R.length));M=M.substring(M.lastIndexOf(".")+1);for(var K=0;K<R.length;K++){if(R.charAt(K)=="#"&&M.charAt(K)!="0"){S+=M.charAt(K);continue;}if(R.charAt(K)=="#"&&M.charAt(K)=="0"){var I=M.substring(K);if(I.match("[1-9]")){S+=M.charAt(K);continue;}break;}R.charAt(K)=="0"&&(S+=M.charAt(K));}T+=S;}else{ad=Math.round(ad);}var H=Math.floor(ad);ad<0&&(H=Math.ceil(ad));var G="";ac.format.indexOf(".")==-1?G=ac.format:G=ac.format.substring(0,ac.format.indexOf("."));var F="";if(H!=0||G.substr(G.length-1)!="#"||U){var E=new String(Math.abs(H)),k=9999;G.lastIndexOf(",")!=-1&&(k=G.length-G.lastIndexOf(",")-1);var a=0;for(var K=E.length-1;K>-1;K--){F=E.charAt(K)+F,a++,a==k&&K!=0&&(F=W+F,a=0);}if(G.length>F.length){var P=G.indexOf("0");if(P!=-1){var N=G.length-P,L=G.length-F.length-1;while(F.length<N){var J=G.charAt(L);J==","&&(J=W),F=J+F,L--;}}}}return !F&&G.indexOf("0",G.length-1)!==-1&&(F="0"),T=F+T,ad<0&&Z&&aa.length>0?aa=V+aa:ad<0&&(T=V+T),ac.decimalSeparatorAlwaysShown||T.lastIndexOf(X)==T.length-1&&(T=T.substring(0,T.length-1)),T=aa+T+ab,T;},v.fn.parseNumber=function(a,j,i){j==null&&(j=!0),i==null&&(i=!0);var h;v(this).is(":input")?h=new String(v(this).val()):h=new String(v(this).text());var g=v.parseNumber(h,a);if(g){j&&(v(this).is(":input")?v(this).val(g.toString()):v(this).text(g.toString()));if(i){return g;}}},v.parseNumber=function(G,F){var F=v.extend({},v.fn.parseNumber.defaults,F),E=l(F.locale.toLowerCase(),F.isFullLocale),D=E.dec,C=E.group,B=E.neg,A="1234567890.-";while(G.indexOf(C)>-1){G=G.replace(C,"");}G=G.replace(D,".").replace(B,"-");var z="",y=!1;if(G.charAt(G.length-1)=="%"||F.isPercentage==1){y=!0;}for(var x=0;x<G.length;x++){A.indexOf(G.charAt(x))>-1&&(z+=G.charAt(x));}var w=new Number(z);if(y){w/=100;var k=z.indexOf(".");if(k!=-1){var a=z.length-k-1;w=w.toFixed(a+2);}else{w=w.toFixed(z.length-1);}}return w;},v.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,isFullLocale:!1},v.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1},Number.prototype.toFixed=function(a){return v._roundNumber(this,a);},v._roundNumber=function(g,f){var j=Math.pow(10,f||0),i=String(Math.round(g*j)/j);if(f>0){var h=i.indexOf(".");h==-1?(i+=".",h=0):h=i.length-(h+1);while(h<f){i+="0",h++;}}return i;};})(jQuery),function(){var d={};this.tmpl=function c(f,b){var a=/\W/.test(f)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):d[f]=d[f]||c(document.getElementById(f).innerHTML);return b?a(b):a;};}(),function(b){b.baseClass=function(a){return a=b(a),a.get(0).className.match(/([^ ]+)/)[1];},b.fn.addDependClass=function(a,f){var e={delimiter:f?f:"-"};return this.each(function(){var d=b.baseClass(this);d&&b(this).addClass(d+e.delimiter+a);});},b.fn.removeDependClass=function(a,f){var e={delimiter:f?f:"-"};return this.each(function(){var d=b.baseClass(this);d&&b(this).removeClass(d+e.delimiter+a);});},b.fn.toggleDependClass=function(a,f){var e={delimiter:f?f:"-"};return this.each(function(){var d=b.baseClass(this);d&&(b(this).is("."+d+e.delimiter+a)?b(this).removeClass(d+e.delimiter+a):b(this).addClass(d+e.delimiter+a));});};}(jQuery),function(d){function c(){this._init.apply(this,arguments);}c.prototype.oninit=function(){},c.prototype.events=function(){},c.prototype.onmousedown=function(){this.ptr.css({position:"absolute"});},c.prototype.onmousemove=function(f,e,g){this.ptr.css({left:e,top:g});},c.prototype.onmouseup=function(){},c.prototype.isDefault={drag:!1,clicked:!1,toclick:!0,mouseup:!1},c.prototype._init=function(){if(arguments.length>0){this.ptr=d(arguments[0]),this.outer=d(".draggable-outer"),this.is={},d.extend(this.is,this.isDefault);var a=this.ptr.offset();this.d={left:a.left,top:a.top,width:this.ptr.width(),height:this.ptr.height()},this.oninit.apply(this,arguments),this._events();}},c.prototype._getPageCoords=function(b){return b.targetTouches&&b.targetTouches[0]?{x:b.targetTouches[0].pageX,y:b.targetTouches[0].pageY}:{x:b.pageX,y:b.pageY};},c.prototype._bindEvent=function(f,e,h){var g=this;this.supportTouches_?f.get(0).addEventListener(this.events_[e],h,!1):f.bind(this.events_[e],h);},c.prototype._events=function(){var a=this;this.supportTouches_=d.browser.webkit&&navigator.userAgent.indexOf("Mobile")!=-1,this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup"},this._bindEvent(d(document),"move",function(b){a.is.drag&&(b.stopPropagation(),b.preventDefault(),a._mousemove(b));}),this._bindEvent(d(document),"down",function(b){a.is.drag&&(b.stopPropagation(),b.preventDefault());}),this._bindEvent(d(document),"up",function(b){a._mouseup(b);}),this._bindEvent(this.ptr,"down",function(b){return a._mousedown(b),!1;}),this._bindEvent(this.ptr,"up",function(b){a._mouseup(b);}),this.ptr.find("a").click(function(){a.is.clicked=!0;if(!a.is.toclick){return a.is.toclick=!0,!1;}}).mousedown(function(b){return a._mousedown(b),!1;}),this.events();},c.prototype._mousedown=function(a){this.is.drag=!0,this.is.clicked=!1,this.is.mouseup=!1;var f=this.ptr.offset(),e=this._getPageCoords(a);this.cx=e.x-f.left,this.cy=e.y-f.top,d.extend(this.d,{left:f.left,top:f.top,width:this.ptr.width(),height:this.ptr.height()}),this.outer&&this.outer.get(0)&&this.outer.css({height:Math.max(this.outer.height(),d(document.body).height()),overflow:"hidden"}),this.onmousedown(a);},c.prototype._mousemove=function(f){this.is.toclick=!1;var e=this._getPageCoords(f);this.onmousemove(f,e.x-this.cx,e.y-this.cy);},c.prototype._mouseup=function(a){var e=this;this.is.drag&&(this.is.drag=!1,this.outer&&this.outer.get(0)&&(d.browser.mozilla?this.outer.css({overflow:"hidden"}):this.outer.css({overflow:"visible"}),d.browser.msie&&d.browser.version=="6.0"?this.outer.css({height:"100%"}):this.outer.css({height:"auto"})),this.onmouseup(a));},window.Draggable=c;}(jQuery),function(g){function f(b){return typeof b=="undefined"?!1:b instanceof Array||!(b instanceof Object)&&Object.prototype.toString.call(b)=="[object Array]"||typeof b.length=="number"&&typeof b.splice!="undefined"&&typeof b.propertyIsEnumerable!="undefined"&&!b.propertyIsEnumerable("splice")?!0:!1;}function i(){return this.init.apply(this,arguments);}function h(){Draggable.apply(this,arguments);}g.slider=function(a,k){var d=g(a);return d.data("jslider")||d.data("jslider",new i(a,k)),d.data("jslider");},g.fn.slider=function(n,m){function b(c){return c!==undefined;}function a(c){return c!=null;}var l,k=arguments;return this.each(function(){var o=g.slider(this,n);if(typeof n=="string"){switch(n){case"value":if(b(k[1])&&b(k[2])){var e=o.getPointers();a(e[0])&&a(k[1])&&(e[0].set(k[1]),e[0].setIndexOver()),a(e[1])&&a(k[2])&&(e[1].set(k[2]),e[1].setIndexOver());}else{if(b(k[1])){var e=o.getPointers();a(e[0])&&a(k[1])&&(e[0].set(k[1]),e[0].setIndexOver());}else{l=o.getValue();}}break;case"prc":if(b(k[1])&&b(k[2])){var e=o.getPointers();a(e[0])&&a(k[1])&&(e[0]._set(k[1]),e[0].setIndexOver()),a(e[1])&&a(k[2])&&(e[1]._set(k[2]),e[1].setIndexOver());}else{if(b(k[1])){var e=o.getPointers();a(e[0])&&a(k[1])&&(e[0]._set(k[1]),e[0].setIndexOver());}else{l=o.getPrcValue();}}break;case"calculatedValue":var d=o.getValue().split(";");l="";for(var c=0;c<d.length;c++){l+=(c>0?";":"")+o.nice(d[c]);}break;case"skin":o.setSkin(k[1]);}}else{!n&&!m&&(f(l)||(l=[]),l.push(o));}}),f(l)&&l.length==1&&(l=l[0]),l||this;};var j={settings:{from:1,to:10,step:1,smooth:!0,limits:!0,round:0,format:{format:"#,##0.##"},value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:tmpl('<span class="<%=className%>"><table><tr><td><div class="<%=className%>-bg"><i class="l"></i><i class="r"></i><i class="v"></i></div><div class="<%=className%>-pointer"></div><div class="<%=className%>-pointer <%=className%>-pointer-to"></div><div class="<%=className%>-label"><span><%=settings.from%></span></div><div class="<%=className%>-label <%=className%>-label-to"><span><%=settings.to%></span><%=settings.dimension%></div><div class="<%=className%>-value"><span></span><%=settings.dimension%></div><div class="<%=className%>-value <%=className%>-value-to"><span></span><%=settings.dimension%></div><div class="<%=className%>-scale"><%=scale%></div></td></tr></table></span>')};i.prototype.init=function(a,c){this.settings=g.extend(!0,{},j.settings,c?c:{}),this.inputNode=g(a).hide(),this.settings.interval=this.settings.to-this.settings.from,this.settings.value=this.inputNode.attr("value"),this.settings.calculate&&g.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate),this.settings.onstatechange&&g.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange),this.is={init:!1},this.o={},this.create();},i.prototype.onstatechange=function(){},i.prototype.create=function(){var a=this;this.domNode=g(j.template({className:j.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()})),this.inputNode.after(this.domNode),this.drawScale(),this.settings.skin&&this.settings.skin.length>0&&this.setSkin(this.settings.skin),this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()},g.extend(this.o,{pointers:{},labels:{0:{o:this.domNode.find(j.selector+"value").not(j.selector+"value-to")},1:{o:this.domNode.find(j.selector+"value").filter(j.selector+"value-to")}},limits:{0:this.domNode.find(j.selector+"label").not(j.selector+"label-to"),1:this.domNode.find(j.selector+"label").filter(j.selector+"label-to")}}),g.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")}),g.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")}),a.settings.value.split(";")[1]||(this.settings.single=!0,this.domNode.addDependClass("single")),a.settings.limits||this.domNode.addDependClass("limitless"),this.domNode.find(j.selector+"pointer").each(function(b){var k=a.settings.value.split(";")[b];if(k){a.o.pointers[b]=new h(this,b,a);var e=a.settings.value.split(";")[b-1];e&&new Number(k)<new Number(e)&&(k=e),k=k<a.settings.from?a.settings.from:k,k=k>a.settings.to?a.settings.to:k,a.o.pointers[b].set(k,!0);}}),this.o.value=this.domNode.find(".v"),this.is.init=!0,g.each(this.o.pointers,function(b){a.redraw(this);}),function(c){g(window).resize(function(){c.onresize();});}(this);},i.prototype.setSkin=function(b){this.skin_&&this.domNode.removeDependClass(this.skin_,"_"),this.domNode.addDependClass(this.skin_=b,"_");},i.prototype.setPointersIndex=function(a){g.each(this.getPointers(),function(b){this.index(b);});},i.prototype.getPointers=function(){return this.o.pointers;},i.prototype.generateScale=function(){if(this.settings.scale&&this.settings.scale.length>0){var k="",e=this.settings.scale,m=Math.round(100/(e.length-1)*10)/10;for(var l=0;l<e.length;l++){k+='<span style="left: '+l*m+'%">'+(e[l]!="|"?"<ins>"+e[l]+"</ins>":"")+"</span>";}return k;}return"";},i.prototype.drawScale=function(){this.domNode.find(j.selector+"scale span ins").each(function(){g(this).css({marginLeft:-g(this).outerWidth()/2});});},i.prototype.onresize=function(){var a=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()},g.each(this.o.pointers,function(b){a.redraw(this);});},i.prototype.update=function(){this.onresize(),this.drawScale();},i.prototype.limits=function(k,e){if(!this.settings.smooth){var m=this.settings.step*100/this.settings.interval;k=Math.round(k/m)*m;}var l=this.o.pointers[1-e.uid];return l&&e.uid&&k<l.value.prc&&(k=l.value.prc),l&&!e.uid&&k>l.value.prc&&(k=l.value.prc),k<0&&(k=0),k>100&&(k=100),Math.round(k*10)/10;},i.prototype.redraw=function(b){if(!this.is.init){return !1;}this.setValue(),this.o.pointers[0]&&this.o.pointers[1]&&this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"}),this.o.labels[b.uid].value.html(this.nice(b.value.origin)),this.redrawLabels(b);},i.prototype.redrawLabels=function(l){function k(e,c,s){return c.margin=-c.label/2,label_left=c.border+c.margin,label_left<0&&(c.margin-=label_left),c.border+c.label/2>r.sizes.domWidth?(c.margin=0,c.right=!0):c.right=!1,e.o.css({left:s+"%",marginLeft:c.margin,right:"auto"}),c.right&&e.o.css({left:"auto",right:0}),c;}var r=this,q=this.o.labels[l.uid],p=l.value.prc,o={label:q.o.outerWidth(),right:!1,border:p*this.sizes.domWidth/100};if(!this.settings.single){var n=this.o.pointers[1-l.uid],m=this.o.labels[n.uid];switch(l.uid){case 0:o.border+o.label/2>m.o.offset().left-this.sizes.domOffset.left?(m.o.css({visibility:"hidden"}),m.value.html(this.nice(n.value.origin)),q.o.css({visibility:"visible"}),p=(n.value.prc-p)/2+p,n.value.prc!=l.value.prc&&(q.value.html(this.nice(l.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(n.value.origin)),o.label=q.o.outerWidth(),o.border=p*this.sizes.domWidth/100)):m.o.css({visibility:"visible"});break;case 1:o.border-o.label/2<m.o.offset().left-this.sizes.domOffset.left+m.o.outerWidth()?(m.o.css({visibility:"hidden"}),m.value.html(this.nice(n.value.origin)),q.o.css({visibility:"visible"}),p=(p-n.value.prc)/2+n.value.prc,n.value.prc!=l.value.prc&&(q.value.html(this.nice(n.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(l.value.origin)),o.label=q.o.outerWidth(),o.border=p*this.sizes.domWidth/100)):m.o.css({visibility:"visible"});}}o=k(q,o,p);if(m){var o={label:m.o.outerWidth(),right:!1,border:n.value.prc*this.sizes.domWidth/100};o=k(m,o,n.value.prc);}this.redrawLimits();},i.prototype.redrawLimits=function(){if(this.settings.limits){var l=[!0,!0];for(key in this.o.pointers){if(!this.settings.single||key==0){var k=this.o.pointers[key],p=this.o.labels[k.uid],o=p.o.offset().left-this.sizes.domOffset.left,n=this.o.limits[0];o<n.outerWidth()&&(l[0]=!1);var n=this.o.limits[1];o+p.o.outerWidth()>this.sizes.domWidth-n.outerWidth()&&(l[1]=!1);}}for(var m=0;m<l.length;m++){l[m]?this.o.limits[m].fadeIn("fast"):this.o.limits[m].fadeOut("fast");}}},i.prototype.setValue=function(){var b=this.getValue();this.inputNode.attr("value",b),this.onstatechange.call(this,b);},i.prototype.getValue=function(){if(!this.is.init){return !1;}var a=this,d="";return g.each(this.o.pointers,function(b){this.value.prc!=undefined&&!isNaN(this.value.prc)&&(d+=(b>0?";":"")+a.prcToValue(this.value.prc));}),d;},i.prototype.getPrcValue=function(){if(!this.is.init){return !1;}var a=this,d="";return g.each(this.o.pointers,function(b){this.value.prc!=undefined&&!isNaN(this.value.prc)&&(d+=(b>0?";":"")+this.value.prc);}),d;},i.prototype.prcToValue=function(l){if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0){var k=this.settings.heterogeneity,q=0,p=this.settings.from;for(var o=0;o<=k.length;o++){if(k[o]){var n=k[o].split("/");}else{var n=[100,this.settings.to];}n[0]=new Number(n[0]),n[1]=new Number(n[1]);if(l>=q&&l<=n[0]){var m=p+(l-q)*(n[1]-p)/(n[0]-q);}q=n[0],p=n[1];}}else{var m=this.settings.from+l*this.settings.interval/100;}return this.round(m);},i.prototype.valueToPrc=function(l,k){if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0){var r=this.settings.heterogeneity,q=0,p=this.settings.from;for(var o=0;o<=r.length;o++){if(r[o]){var n=r[o].split("/");}else{var n=[100,this.settings.to];}n[0]=new Number(n[0]),n[1]=new Number(n[1]);if(l>=p&&l<=n[1]){var m=k.limits(q+(l-p)*(n[0]-q)/(n[1]-p));}q=n[0],p=n[1];}}else{var m=k.limits((l-this.settings.from)*100/this.settings.interval);}return m;},i.prototype.round=function(b){return b=Math.round(b/this.settings.step)*this.settings.step,this.settings.round?b=Math.round(b*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):b=Math.round(b),b;},i.prototype.nice=function(a){return a=a.toString().replace(/,/gi,".").replace(/ /gi,""),g.formatNumber?g.formatNumber(new Number(a),this.settings.format||{}).replace(/-/gi,"&minus;"):new Number(a);},h.prototype=new Draggable,h.prototype.oninit=function(e,d,k){this.uid=d,this.parent=k,this.value={},this.settings=this.parent.settings;},h.prototype.onmousedown=function(b){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()},this.ptr.addDependClass("hover"),this.setIndexOver();},h.prototype.onmousemove=function(e,d){var k=this._getPageCoords(e);this._set(this.calc(k.x));},h.prototype.onmouseup=function(a){this.parent.settings.callback&&g.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,this.parent.getValue()),this.ptr.removeDependClass("hover");},h.prototype.setIndexOver=function(){this.parent.setPointersIndex(1),this.index(2);},h.prototype.index=function(b){this.ptr.css({zIndex:b});},h.prototype.limits=function(b){return this.parent.limits(b,this);},h.prototype.calc=function(d){var c=this.limits((d-this._parent.offset.left)*100/this._parent.width);return c;},h.prototype.set=function(d,c){this.value.origin=this.parent.round(d),this._set(this.parent.valueToPrc(d,this),c);},h.prototype._set=function(d,c){c||(this.value.origin=this.parent.prcToValue(d)),this.value.prc=d,this.ptr.css({left:d+"%"}),this.parent.redraw(this);};}(jQuery);(function(){jQuery.fn.setAltText=function(b){var a=jQuery(this);if(!jQuery.browser.msie){return a;}else{return a.each(function(c,f){f=jQuery(f);var e=f.attr("placeholder")||"";var h=e!=undefined?e:b&&b.text&&b.text!=""?b.text:"Enter text";var g=b&&b.blurcolor?b.blurcolor:"#7F7F7F";var d=b&&b.focuscolor?b.focuscolor:f.css("color");f.bind({blur:function(){if(f.val()==h||f.val()==""){f.val(h).css("color",g);}else{f.css("color",d);}},focus:function(){if(f.val()==h){f.val("").css("color",d);}}});if(!f.is(":focus")){f.val(h).css("color",g);}});}};})();